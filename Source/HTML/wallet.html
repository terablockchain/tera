<!DOCTYPE HTML>
<!DOCTYPE HTML>

<html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TERA</title>
    <link rel="shortcut icon" href="/HTML/PIC/wallet.png" type="image/png">

    <link rel="stylesheet" type="text/css" href="../HTML/CSS/style.css">
    <link rel="stylesheet" type="text/css" href="../HTML/CSS/wallet.css">
    <link rel="stylesheet" type="text/css" href="../HTML/CSS/buttons.css">

</head>



<script>
    window.RUN_CLIENT=1;
    window.RUN_SERVER=0;
    if(typeof global === 'object')
    {
        global.RUN_CLIENT=1;
        global.RUN_SERVER=0;
    }
</script>

<script type="text/javascript" src="/HTML/JS/coinlib.js"></script>
<script type="text/javascript" src="../HTML/JS/client.js"></script>
<script type="text/javascript" src="../HTML/JS/sha3.js"></script>
<script type="text/javascript" src="../HTML/JS/crypto-client.js"></script>

<script type="text/javascript" src="/HTML/JS/wallet-lib.js"></script>
<script type="text/javascript" src="/HTML/JS/wallet-node.js"></script>
<script type="text/javascript" src="/HTML/JS/terahashlib.js"></script>

<script type="text/javascript" src="/HTML/JS/wallet-hash-info.js"></script>

<script type="text/javascript" src="./JS/sign-lib-min.js"></script>


<script>
    var WasInitCurrency=0;
    var CONFIG_DATA={}; CONFIG_DATA.CONSTANTS={};
    var ServerBlockNumDB=0;
    var ServerCurBlockNum=0;
    var ServerTime=0;
    var MiningAccount=0;

    var WalletStatus;
    var BLOCK_PROCESSING_LENGTH=8;
    var PubKeyStr;
    var PrivKeyStr;
    var WalletOpen;




    var SERVER_IP;
    var SERVER_PORT;

    var CurTabName;

    var TabArr=[{name:"TabAccounts",log:1},{name:"TabSend",log:1},{name:"TabDapps"},{name:"TabSharding"},{name:"TabExplorer"}];
    var SaveIdArr=["idAccount","idTo","idSumSend","idDescription","idSelStyle",
        "idViewAccountNum","idViewBlockNum","idViewActNum","idViewJournNum","idViewCrossOutNum","idViewCrossInNum","idViewHashNum","idViewDappNum","idViewShardNum",
        "idRunText","idViewAccountFilter",
        "idBlockCount"];


    var MaxAccID=0;
    var MaxDappsID=0;
    var MaxActNum=0;
    var MaxJournalNum=0;
    var HistoryMaxNum=0;
    var MaxCrossOutNum=0;
    var MaxCrossInNum=0;
    //var MaxCrossRunNum=0;
    var MaxShardNum=0;

    var idPercentItem;

    var WasSetRestart=0;

</script>

<script>
    /*User action User action User action User action User action User action User action User action User action */

    //CONFIG
    //CONFIG
    //CONFIG
    function IsPrivateMode()
    {
        if(PrivKeyStr && PrivKeyStr.length===64 && PrivKeyStr!=="0000000000000000000000000000000000000000000000000000000000000000")
            return true;
        else
            return false;
    }




    function NewPrivateKey()
    {
        var arr = new Uint8Array(32);
        window.crypto.getRandomValues(arr);
        var Str=GetHexFromArr(sha3(arr));

        $("idKeyNew").value=Str;
        SetVisibleEditKeys(1);

        var Select=$("idTypeKey");
        Select.value="private";

        SetVisibleItemByTypeKey();
    }
    function EditPrivateKey()
    {
        if(!IsVisibleBlock("edit_keys"))
        {
            var Select=$("idTypeKey");
            if(IsPrivateMode())
            {
                $("idKeyNew").value=PrivKeyStr;
                Select.value="private";
            }
            else
            {
                $("idKeyNew").value=PubKeyStr;
                Select.value="public";
            }



            SetVisibleEditKeys(1);
        }
        else
        {
            CancelSavePrivateKey();
        }
    }

    function ConvertToPrivateKey()
    {
        var Str=$("idKeyNew").value;
        if(!Str || Str.length<20)
        {
            SetError("Enter secret words that are at least 20 characters long");
            return;
        }

        var Str2=$("idKeyNew2").value;
        if(Str2 && Str!==Str2)
        {
            SetError("Re-entered secret does not match");
            return;
        }

        $("idTypeKey").value="private";
        SetVisibleItemByTypeKey();
        $("idKeyNew").value=GetPrivateKeyFromStr(Str);
        $("idKeyNew2").value="";
    }

    function GetPrivateKeyFromStr(Str)
    {
        var StrHex=sha3_str(Str);
        for(var i=0;i<100000;i++)
            StrHex=sha3_str(StrHex);

        return StrHex.toUpperCase();
    }

    function CancelSavePrivateKey()
    {
        SetVisibleEditKeys(0);
    }




    //ACCOUNTS
    //ACCOUNTS
    //ACCOUNTS
    function FindMyAccounts()
    {
        GetData("FindMyAccounts",{},function (Data)
        {
            WasAccountsDataStr="";
            UpdatesData();
        });

    }


    function ViewNewAccount()
    {
        var name="idAccountEdit";
        if(IsVisibleBlock(name))
        {
            SetVisibleBlock(name,false);
        }
        else
        {
            SetVisibleBlock(name,true);
            $("idAccountName").focus();

            var Select=$("idAccount");
            SetViewWN();
        }
    }
    function SetViewWN()
    {
        $("Item.WN").innerText="";
        SetVisibleBlock("Item.WN","none");
    }
    function CancelCreateAccount()
    {
        var name="idAccountEdit";
        SetVisibleBlock(name,false)
    }

    var WasCreateAccountInfo;
    function CreateAccount(bAddToPay)
    {
        if(!CanSendTransaction)
        {
            SetError("Can't Send transaction");
            return;
        }

        WasCreateAccountInfo=PubKeyStr;

        var Description=$("idAccountName").value;
        var AMinerID=ParseNum($("idAMinerID").value);
        if(AMinerID)
        {
            if(AMinerID<1e9 || AMinerID>1e10)
            {
                SetError("Error Advanced miner ID. Must be 10 digital.")
                return;
            }
        }
        var Smart=ParseNum($("idSmart").value);
        var Currency=GetCurrencyByName($("idCurrency").value);

        var WN=ParseNum($("idWN").value);

        if(!Description)
        {
            SetError("Enter the account name.");
            return;
        }

        if(WN)
        {
            GetData("GetAccountKey",WN,function (Data)
            {
                if(Data && Data.result===1)
                {
                    SendTrCreateAcc(Currency,Data.PubKeyStr,Description,AMinerID,Smart,1,bAddToPay);
                }
            });
        }
        else
        {
            SendTrCreateAcc(Currency,PubKeyStr,Description,AMinerID,Smart,0,bAddToPay);
        }
    }

    function SendRunRun()
    {
        SetStatus("");
        GetData("SendDirectCode",{Code:"RunRun()",TX:1}, function (Data)
        {
            if(Data)
            {
                SetStatus("Run ok");
                //ViewCurrent(DefShard);
            }
        });
    }

    function IsCorrectShardName(Name)
    {
        if(!Name || Name.length<3)
            return "Error shard name: "+Name+" Length must be min 3 letters";
        const SHARD_LETTER="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";

        for(var i=0;i<Name.length;i++)
        {
            var Index=SHARD_LETTER.indexOf(Name.substr(i,1));
            if(Index<0)
                return "Error shard name: "+Name+" Letters must be between A-Z or 0-9";
            if(i===0 && Index<10)
                return "Error shard name: "+Name+" First letters must be between A-Z";
        }

        return 1;
    }

    function CreateNewShard()
    {
        var Name=$("idShardName").value;
        var Confirms=$("idShardConfirms").value;
        Name=Name.toUpperCase().trim();
        var Result=IsCorrectShardName(Name);
        if(Result!==1)
            return SetError(Result);



        var TR=
            {
                Type:TYPE_TRANSACTION_NEW_SHARD,
                ShardName:Name,
                Confirms:Confirms,
                Description:$("idShardDescription").value,
            };

        var Body=[];
        WriteByte(Body,TR.Type);
        WriteStr(Body,TR.ShardName,8);
        WriteStr(Body,TR.Description,40);
        WriteUint32(Body,TR.Confirms);
        Body.length+=6;//Reserve

        var Item=
            {
                name:Name,
                To:0,
                Amount:CONFIG_DATA.PRICE_DAO.NewShard,
                Description:"Shard "+Name+":"+Confirms,
                Body:Body,
            };
        AddToInvoiceList(Item,1);

        SetVisibleShardCreate();
    }



    function SetVisibleEditKeys(bSet)
    {
        SetVisibleBlock("edit_keys",bSet);
        if(bSet)
        {
            SetVisibleItemByTypeKey();
            $("idKeyNew").focus();
        }
    }

    function SelectTypeKey()
    {
        var Select=$("idTypeKey");
        var Item=$("idKeyNew");
        var Item2=$("idKeyNew2");

        if(Select.value==="public" && (Item.value.length!==66 || Item.value.substr(0,1)!=="0"))
        {
            Item.value="";
            Item2.value="";
        }
        else
        if(Select.value==="private" && Item.value===PubKeyStr)
        {
            Item.value="";
            Item2.value="";
        }
        else
        if(Select.value==="brain" && Item.value.length>=64 && IsHexStr(Item.value))
        {
            Item.value="";
            Item2.value="";
        }

        SetVisibleItemByTypeKey();

    }
    function SetVisibleItemByTypeKey()
    {
        var SelectType=$("idTypeKey").value;
        if(SelectType==="brain")
        {
            SetVisibleBlock("idViewKeyNew2","table-row");
            SetVisibleBlock("idBtConvertKey","inline-block");
            SetVisibleBlock("idBtSaveKey",false);
        }
        else
        {
            SetVisibleBlock("idViewKeyNew2","none");
            SetVisibleBlock("idBtConvertKey",false);
            SetVisibleBlock("idBtSaveKey","inline-block");
        }

        var StrPrivHex=$("idKeyNew").value;
        if(StrPrivHex && window.SignLib)
        {
            var PrivKeyArr = GetArrFromHex($("idKeyNew").value);
            if(PrivKeyArr.length===33)
                $("idPubKey").innerText=$("idKeyNew").value;
            else
                $("idPubKey").innerText=GetHexFromArr(SignLib.publicKeyCreate(PrivKeyArr, 1));
        }


    }

    //SEND




</script>


<script>

    //Pagination
    var CountViewRows=20;
    var DefAccounts={BlockName:"idPaginationAccount", NumName:"idViewAccountNum", TabName:"grid_accounts_all",APIName:"GetAccountList",Param3:"",FilterName:"idViewAccountFilter",TotalSum:"idTotalSum"};
    var DefBlock={BlockName:"idPaginationBlock", NumName:"idViewBlockNum", TabName:"grid_block_all",APIName:"GetBlockList",Param3:"",FilterName:""};//idViewBlockFilter


    var DefHistory={BlockName:"idPaginationHistory", NumName:"idViewHistoryNum", TabName:"grid_history",APIName:"GetHistoryAct",Param3:"",FilterName:"idViewHistoryFilter",TotalSum:"idTotalSumH"};
    var DefActs={BlockName:"idPaginationAct", NumName:"idViewActNum", TabName:"grid_acts_all",APIName:"GetActList",Param3:""};
    var DefJournal={BlockName:"idPaginationJournal", NumName:"idViewJournNum", TabName:"grid_journal",APIName:"GetJournalList",Param3:"", FBlockName:"idViewJournalRunBlockNum",FindBlock:"FindJournalByBlockNum"};
    var DefHash={BlockName:"idPaginationHash", NumName:"idViewHashNum", TabName:"grid_hash_all",APIName:"GetHashList",Param3:""};

    var DefDapps={BlockName:"idPaginationDapps", NumName:"idViewDappNum", TabName:"grid_dapps_all",APIName:"GetDappList",Param3:"",FilterName:"idViewDappsFilter",FilterName2:"idCategory",CountViewRows:10};

    var DefCrossOut={BlockName:"idPaginationCrossSend", NumName:"idViewCrossOutNum", TabName:"grid_cross_send",APIName:"GetCrossOutList",Param3:"", FBlockName:"idViewCrossOutBlockNum",FindBlock:"FindCrossOutByBlockNum"};
    var DefCrossIn={BlockName:"idPaginationCrossReceive", NumName:"idViewCrossInNum", TabName:"grid_cross_receive",APIName:"GetCrossInList",Param3:"", FBlockName:"idViewCrossInBlockNum",FindBlock:"FindCrossInByBlockNum"};

    var DefShard={BlockName:"idPaginationShard", NumName:"idViewShardNum", TabName:"grid_shard",APIName:"GetShardList",Param3:""};


    function ViewHistory()
    {
        ViewCurrent(DefHistory);
    }
    function ViewDapps()
    {
        ViewCurrent(DefDapps);
    }


    var MapCheckBtPress={};
    var ArrCheckEscPress=[];
    function SetImg(This,Name)
    {
        if(!This)
            return;

        MapCheckBtPress[Name]=This;

        if(IsVisibleBlock(Name))
        {
            This.id="idUp";

            for(var i=ArrCheckEscPress.length-1;i>=0;i--)
            {
                var element=ArrCheckEscPress[i];
                if(element.name===Name)
                {
                    return;
                }
            }


            ArrCheckEscPress.push({name:Name,item:This,tab:CurTabName});
        }
        else
        {
            This.id="idDown";
        }
        //console.log("This="+This.value);
    }
    setInterval(function ()
    {
        for(var key in MapCheckBtPress)
        {
            var item=MapCheckBtPress[key];
            SetImg(item,key);
        }
    },300);


</script>




<script>

    /*Get data from server Get data from server Get data from server Get data from server Get data from server */
    function UpdatesConfigData()
    {
        GetData("GetWalletInfo",{}, function (Data)
        {
            SetConfigData(Data);
        });
    }
    function UpdatesAccountsData()
    {
        GetData("/GetWalletAccounts",{}, function (Data,responseText)
        {
            SetAccountsData(Data,responseText);
        });
    }

    function UpdatesData()
    {

        UpdatesAccountsData();
        CheckNameAccTo();
        CheckSending();
    }


    var TitleWarning=0;
    function SetTitle(TitleName)
    {
        if(TitleWarning===1)
            document.title="*"+TitleName+"*";
        else
        if(TitleWarning===2)
            document.title="**"+TitleName+"**";
        else
        if(TitleWarning>2)
            document.title="***"+TitleName+"***";
        else
            document.title=TitleName;
    }

    var LastLoadPercent=0;
    var LastLoadPercentTime=0;
    function SetConfigData(Data)
    {
        if(!Data || !Data.result)
            return;

        CheckSessionID(Data.sessionid);

        CONFIG_DATA=Data;
        ServerBlockNumDB=Data.BlockNumDB;
        ServerCurBlockNum=Data.CurBlockNum;
        ServerTime=Data.CurTime;
        var DeltaTime=Data.DELTA_CURRENT_TIME/1000;

        var Name=Data.SHARD_NAME;
        if(CONFIG_DATA.CONSTANTS.WALLET_NAME)
            Name=CONFIG_DATA.CONSTANTS.WALLET_NAME;


        if(CONFIG_DATA.CONSTANTS.COUNT_VIEW_ROWS)
            CountViewRows=CONFIG_DATA.CONSTANTS.COUNT_VIEW_ROWS;

        SetBlockChainConstant(Data);
        MaxBlockNum=GetCurrentBlockNumByTime();


        window.NETWORK_NAME=CONFIG_DATA.NETWORK;
        window.SHARD_NAME=CONFIG_DATA.SHARD_NAME;
        if(!WasInitCurrency)
        {

            WasInitCurrency=1;FillCurrencyAsync("idCurrencyList");
        }

        var StrVersion=""+Data.VersionNum;
        if(Data.CODE_VERSION.VersionNum && Data.VersionNum<Data.CODE_VERSION.VersionNum)
        {
            StrVersion=StrVersion+"/"+Data.CODE_VERSION.VersionNum;
        }

        SetTitle(Name+":"+StrVersion);

        DeltaTime=DeltaTime.toFixed(3);
        var DeltaDB=Data.CurBlockNum-Data.BlockNumDB;
        var DeltaTX=Data.CurBlockNum-Data.TXBlockNum;

        var JinnStat=Data.NodeSyncStatus;

        if(DeltaDB>BLOCK_PROCESSING_LENGTH*2)
        {
            var Percent=0;
            CanSendTransaction=0;
            var StrMode="";
            var MaxNum=Data.CurBlockNum-BLOCK_PROCESSING_LENGTH;
            if(MaxNum>0)
            {
                if(JinnStat)
                {
                    var LoadedH=JinnStat.Header2-JinnStat.Header1;
                    var LoadedB=JinnStat.Block2-JinnStat.Block1;
                    if(LoadedB>0)//was loaded headers
                    {
                        LoadedH=MaxNum-Data.BlockNumDB;
                    }

                    var Loaded=(LoadedH+LoadedB)/2;
                    //Percent=100*(Data.BlockNumDB+Loaded*0.95)/MaxNum;
                    Percent=100*(Loaded*0.95)/DeltaDB;
                    if(Percent>=100)
                        Percent=99.99;
                    StrMode = "(H:"+(JinnStat.Header2-JinnStat.Header1)+" B:"+(JinnStat.Block2-JinnStat.Block1)+")";
                }
                else
                {
                    Percent=100*Data.BlockNumDB/MaxNum;
                    StrMode = "(" + Data.BlockNumDB + "/" + MaxNum + ")";
                }

                if(Percent<0)
                    Percent=0;
                if(Percent>=99.5)
                    Percent=Percent.toFixed(3);
                else
                    Percent=Percent.toFixed(2);

                StrMode = " " + Percent + "% "+StrMode;
            }

            if(!JinnStat || Percent>LastLoadPercent || Date.now()-LastLoadPercentTime>12*1000)
            {
                SetMainStatus("<DIV align='center' style='color:red'><big><B>Waiting for synchronization " + StrMode + "</B></big></DIV>");
                LastLoadPercent = Percent;
                LastLoadPercentTime=Date.now();
            }

            WalletStatus="WAIT";
        }
        else
        if(!JinnStat && WalletStatus==="WAIT")
        {
            LastLoadPercent=0;
            CanSendTransaction=1;
            WalletStatus="OK";
            SetMainStatus("<DIV align='center' style='color:green'><big><B>Synchronization complete</B></big></DIV>",1);
        }
        else
        {
            LastLoadPercent=0;
            if(JinnStat)
            {
                StrMode = "(H:"+(JinnStat.Header2-JinnStat.Header1)+" B:"+(JinnStat.Block2-JinnStat.Block1)+")";
                SetMainStatus("<DIV align='center' style='color:green'><big><B>Synchronization complete "+StrMode+"</B></big></DIV>", 1);
            }
            CanSendTransaction=1;
        }


        if(CONFIG_DATA.CONSTANTS.NOT_RUN)
        {
            CanSendTransaction=0;
            WalletStatus="OK";
            SetMainStatus("<DIV align='center' style='color:#565571'><big><B>NODE NOT RUNING</B></big></DIV>",1);
        }


        MaxAccID=Data.MaxAccID;
        MaxDappsID=Data.MaxDappsID;
        MaxActNum=Data.MaxActNum;
        MaxJournalNum=Data.MaxJournalNum;
        MaxCrossOutNum=Data.MaxCrossOutNum;
        MaxCrossInNum=Data.MaxCrossInNum;
        //MaxCrossRunNum=Data.MaxCrossRunNum;
        MaxShardNum=Data.MaxShardNum;



        PubKeyStr=Data.PublicKey;
        PrivKeyStr=Data.PrivateKey;
        sessionStorage[WALLET_KEY_NAME]=PrivKeyStr;
        Storage.setItem(WALLET_KEY_NAME,"");





        WalletOpen=Data.WalletOpen;
        SetVisibleBtOpenWallet();

        HistoryMaxNum=Data.HistoryMaxNum;



        $("idCurBlockNum").innerText=Data.CurBlockNum;
        $("idDeltaDB").innerText=DeltaDB;
        $("idDeltaTX").innerText=DeltaTX;
        $("idDeltaTime").innerText=DeltaTime;
        $("idWalletVersion").innerText=StrVersion;
        $("idSpeedSignLib").innerText=Data.SpeedSignLib;

        var MIN_SPEED=700;
        if(CONFIG_DATA.SpeedSignLib<MIN_SPEED)
            $("idSpeedSignLib").className="red";
        else
            $("idSpeedSignLib").className="";
        if(CONFIG_DATA.SpeedSignLib)
            SetVisibleBlock("idSignLibError",(CONFIG_DATA.SpeedSignLib<MIN_SPEED));







        SetArrLog(Data.ArrLog);

        if($("idDataPath").innerText!==Data.DATA_PATH)
            $("idDataPath").innerText=Data.DATA_PATH;
//        if($("idNodeAddr").innerText!==Data.NodeAddrStr)
//            $("idNodeAddr").innerText=Data.NodeAddrStr;







        SetVisibleBlock("idChainMode",Data.IsDevelopAccount);

        var bDevService=!!CONFIG_DATA.CONSTANTS.WALLET_DESCRIPTION;
        SetVisibleBlock("idDevelopService",Data.IsDevelopAccount);
        SetVisibleBlock("idDevelopService2",bDevService);
        //SetVisibleBlock("idTimeDelta",CONFIG_DATA.CONSTANTS.COMMON_KEY?"inline-block":0);


        // if(Data.CurBlockNum<1000000 || Data.IsDevelopAccount)
        //     SetVisibleBlock("idCleanChain","inline");



        if(Data.NeedRestart)
        {
            DoRestartWallet();
        }



        SERVER_IP=Data.ip;
        SERVER_PORT=Data.port;



        //Mining
        MiningAccount=Data.MiningAccount;
        $("idUseMining").checked=CONFIG_DATA.CONSTANTS.USE_MINING;
        $("idUseMiningShards").checked=CONFIG_DATA.CONSTANTS.USE_MINING_SHARDS;
        if(!idPercentItem || document.activeElement!==idPercentItem)
        {
            idPercentItem=$("idPercentMining");
            idPercentItem.value=CONFIG_DATA.CONSTANTS.POW_MAX_PERCENT;
        }
        if(Data.CountMiningCPU>0 && CONFIG_DATA.CONSTANTS.USE_MINING)
            SetVisibleBlock("idMiningParams","inline-block");
        else
            SetVisibleBlock("idMiningParams",0);

        SetStatusMining(" Mining on:<B>"+MiningAccount+"</B>  HashRate:<B>"+(Math.floor(Data.HashRate*10)/10)+"</B>Mh/s CPU RUN:<B>"+Data.CountRunCPU+"</B>/"+Data.CountMiningCPU+" "+(Data.MiningPaused?"<B style='color:darkred;'>=PAUSED=</B>":""));
        if(CONFIG_DATA.CONSTANTS.USE_MINING && Data.CountRunCPU!==Data.CountMiningCPU)
        {
            $("idUseMining").className="checkbox checkbox_red";
        }
        else
        {
            $("idUseMining").className="checkbox";
        }

        if(Data.CODE_VERSION.VersionNum && Data.VersionNum<Data.CODE_VERSION.VersionNum)
        {
            $("idAutoUpdate").className="checkbox checkbox_alert";
        }
        else
        {
            $("idAutoUpdate").className="checkbox";
        }

        $("idAutoUpdate").checked=CONFIG_DATA.CONSTANTS.USE_AUTO_UPDATE;



        window.DEBUG_WALLET=CONFIG_DATA.CONSTANTS.DEBUG_WALLET;


        SetViewWN();

        StartDrawBlockInfo();


        //log level
        if(CONFIG_DATA.MaxLogLevel<4)
            CONFIG_DATA.MaxLogLevel=4;
        $("idLogLevel").value=CONFIG_DATA.CONSTANTS.LOG_LEVEL;
        $("idLogLevelText").innerText=CONFIG_DATA.CONSTANTS.LOG_LEVEL;
        $("idLogLevel").max=CONFIG_DATA.MaxLogLevel;


        if(!CONFIG_DATA.CONSTANTS.DEBUG_WALLET)
        {
            SetVisibleBlock("GetStateItem(Item)","none");
            $("GetStateItem(Item)").innerText="";
            SetVisibleBlock("GetStateItem2(Item)","none");
            $("GetStateItem2(Item)").innerText="";
        }

        if(bDevService)
        {
            sessionStorage[WALLET_KEY_NAME]="";
        }

    }
    
    function ChangeLog()
    {
        CONFIG_DATA.CONSTANTS.LOG_LEVEL=+$("idLogLevel").value;
        $("idLogLevelText").innerText=CONFIG_DATA.CONSTANTS.LOG_LEVEL;
        SaveConstant(0,CONFIG_DATA.CONSTANTS);
    }

    function SetVisibleBtOpenWallet()
    {
        SetVisibleBlock("idOpenWallet",WalletOpen!==undefined);
        var item=$("idOpenWallet");
        if(WalletOpen==true)
        {
            item.value="Wallet opened";
            item.style="background-image: url('/HTML/PIC/lock_open.png');color:green;";
        }
        else
        if(WalletOpen==false)
        {
            item.value="Wallet closed";
            item.style="background-image: url('/HTML/PIC/lock_closed.png');color:"+"#9b712a";
        }

        SetVisibleBlock("wallet_config_tab",WalletOpen!==false);
    }

    function TestSignLib()
    {
        GetData("TestSignLib",{});
    }

    function DoRepeatTx(BlockNum,Tx)
    {
        ToLog("Copy OK!");
    }

</script>



<script>


    //LIB
    var bMainCanClear=true;
    var StrMainStatus="";
    var StrNormalStatus="";
    function SetMainStatus(Str,bCanClear)
    {
        bMainCanClear=bCanClear;
        StrMainStatus=Str;
        ViewStatus();
    }
    function SetStatus(Str,bError)
    {
        if(bError)
            return SetError(Str);

        StrNormalStatus=Str;
        if(bMainCanClear)
        {
            StrMainStatus="";
        }
        ViewStatus();
    }

    function ViewStatus()
    {
        var Str="<B>Shard: "+window.SHARD_NAME+" </B>"+StrNormalStatus+StrMainStatus;

        var id = $("idStatus");
        id.innerHTML=Str;
    }
    function SetError(Str,bNoSound)
    {
        if(!bNoSound)
            $("sound_err").play();
        SetStatus("<span  align='center' style='color:red;align-content: center'><B>"+Str+"</B></span>");
    }
    function SetStatusMining(Str)
    {
        var id = $("idStatusMining");
        id.innerHTML=Str;
    }


    //EVENTS
    //EVENTS
    //EVENTS
    function SetVisibleTab()
    {
        if(!CurTabName)
            CurTabName=TabArr[0].name;

        var bLogVisible=0;
        var str;
        for (var i=0;i<TabArr.length;i++)
        {
            var name=TabArr[i].name;
            var Item=$(name);
            if(!Item)
                continue;
            if(CurTabName===name)
            {
                bLogVisible=TabArr[i].log;
                Item.style.display = 'block';
                str="current bt bttab"
            }
            else
            {
                Item.style.display = 'none';
                str="bttab bt"
            }

            var ItemM=$("M"+name);
            if(ItemM)
                ItemM.className=str;
        }



        //SetVisibleBlock("idStatus",bLogVisible);
        SetVisibleBlock("idServerBlock",bLogVisible);
    }

    function OnSelectTab(name)
    {
        if(name==="TabDapps")
        {
            ViewDapps();
        }
        // else
        // if(name==="TabSharding")
        // {
        //     ViewEnd(DefCrossOut,MaxCrossOutNum);
        // }
    }

    function SelectTab(name,bNoHistory)
    {
        if(!name)
            name="TabAccounts";
        CurTabName=name;
        OnSelectTab(name);
        if(!bNoHistory)
        {
            if(name==="TabAccounts")
                history.pushState(null,null,"#");
            else
                history.pushState(null,null,"#"+name);
        }


        SetVisibleTab();
        SaveValues();
        DoStableScroll();
    }

    function CheckCtrlEnterAndESC(e,F)
    {
        if(IsVisibleBlock("idOverlay"))
        {
            if(e.keyCode===27)
            {
                closeModal();
            }
            else
            if(e.keyCode===13)
            {
                setTimeout(OnConfirmOK,100);
            }
            return;
        }


        SaveValues();

        if(e.ctrlKey && e.keyCode===13)
        {

            if(CurTabName==="TabAccounts" && IsVisibleBlock("edit_keys"))
                SavePrivateKey();
            else
            if(CurTabName==="TabAccounts" && IsVisibleBlock("idAccountEdit"))
                CreateAccount(0);
            else
            if(CurTabName==="TabAccounts" && IsVisibleBlock("edit_mining_set"))
                SaveMiningSet();
            else
            if(CurTabName==="TabSend")
            {
                if(IsVisibleBlock("edit_transaction"))
                    SignAndSendFromJSON();
                else
                if(IsVisibleBlock("idBlockOnSend"))
                    SendMoney2();
                else
                    SendMoneyBefore();

            }
            else
            if(IsVisibleBlock("idBlockPasswordSet"))
                SetPassword();
            else
            if(IsVisibleBlock("idBlockPasswordGet"))
                SetPassword();
            else
                if(WalletOpen===false)
                {
                    ViewOpenWallet();
                }
        }
        else
        if(e.keyCode===27)
        {
            for(var i=ArrCheckEscPress.length-1;i>=0;i--)
            {
                var element=ArrCheckEscPress[i];
                if(element.tab===CurTabName)
                {
                    SetVisibleBlock(element.name,false);
                    SetImg(element.item,element.name);
                    ArrCheckEscPress.splice(i,1);
                    break;
                }
            }
       }

    }

    function LoadValues()
    {
        if(LoadValuesByArr(SaveIdArr))
        {
            CurTabName=localStorage["CurTabName"];

            LoadMapAfter["idAccount"]=localStorage.getItem("idAccount");

        }
    }
    function SaveValues()
    {
        SaveValuesByArr(SaveIdArr);
        localStorage["CurTabName"]=CurTabName;
    }

    //INIT
    //INIT
    //INIT
    function SelectStyle(value)
    {

        var Select=$("idSelStyle");
        if(value)
            Select.value=value;

        if(!Select.value)
            Select.value=Select.options[0].value;

        document.body.className="univers "+Select.value;
    }
    window.onload=function()
    {
        FillCategory("idCategory");

        LoadValues();
        InitPasItems();
        SelectStyle();
        SelectTypeKey();
        InitRun();
        window.onkeydown = CheckCtrlEnterAndESC;
        SetVisibleTab();

        localStorage["BIGWALLET"]=1;

        window.OnInitWallet();

        window.addEventListener("popstate", function(event)
        {
            var Name=window.location.hash.substr(1);
            SelectTab(Name,1);
        }, false);

    }
    if(!window.OnInitWallet)
    window.OnInitWallet=function()
    {


        UpdatesConfigData();
        UpdatesData();
        setInterval(UpdatesData,1000);
        //setInterval(UpdatesConfigData,335);
        setInterval(UpdatesConfigData,1000);
        setInterval(CheckNewMoney,2000);
        setInterval(SaveValues,2000);
        setTimeout(CheckNameAccTo,100);

        if(window.location.hash)
        {
            var LocationPath=window.location.hash.substr(1);
            //console.log("LocationPath="+LocationPath)
            if(LocationPath)
            {
                SelectTab(LocationPath);
            }
        }

        setTimeout(function ()
        {
            OnSelectTab(CurTabName);
        },100)


    }
    function InitRun()
    {
        if(localStorage["WasStart"]!=="1")
        {
            var ValText=$("idRunText").value;
            if(ValText && ValText!=="undefined" && ValText.trim())
            {
                localStorage["WasStart"]="1";
                SetError("Run script ... Was Error?",1);
                eval(ValText);
                SetStatus("Run script ... OK");
            }
            localStorage["WasStart"]="0";
        }
    }

    function SetRun()
    {
        SaveValues();
        localStorage["WasStart"]="0";
        SetStatus("Set to Run script");
    }


</script>


<script>
    var itemPasswordGet,itemPassword1,itemPassword2,itemBtPassword;
    function InitPasItems()
    {
        itemPassword1=$("idPassword1");
        itemPassword2=$("idPassword2");
        itemPasswordGet=$("idPasswordGet");
    }

    function OnClickOpenCloseWallet()
    {
        if(WalletOpen===true)
        {
            GetData("CloseWallet",{},function (Data)
            {
                if(Data && Data.result===1)
                {
                    SetStatus("Wallet close");
                }
            });
        }
        else
        if(WalletOpen===false)
        {
            ViewOpenWallet();
        }

    }

    function ViewOpenWallet()
    {

        if(WalletOpen!==false)
        {
            SetStatus("Wallet not close");
            return;
        }

        itemPasswordGet.onkeydown = OnEnterPas1;
        itemPasswordGet.value="";
        SetVisibleBlock("idBlockPasswordGet",true);
        itemPasswordGet.focus();
    }
    function OpenWallet()
    {
        var Passwd1=itemPasswordGet.value;
        GetData("OpenWallet",Passwd1, function (Data)
        {
            if(Data && Data.result===1)
            {
                itemPasswordGet.value="";
                SetStatus("Wallet open");
                SetVisibleBlock("idBlockPasswordGet",false);
                SetImg(itemBtPassword,'idBlockPasswordGet');
            }
            else
            {
                SetError("Wrong password!")
            }
        });

    }
    function CancelOpenWallet()
    {
        SetVisibleBlock("idBlockPasswordGet",false);
        SetImg(itemBtPassword,'idBlockPasswordGet');
    }


    function ViewSetPassword()
    {
        if(WalletOpen===false)
        {
            SetError("First open wallet!");
            return;
        }

        itemPassword1.onkeydown = OnEnterPas1;
        itemPassword2.onkeydown = OnEnterPas2;

        itemPassword1.value="";
        itemPassword2.value="";
        SetVisibleBlock("idBlockPasswordSet",!IsVisibleBlock("idBlockPasswordSet"));
        SetImg(itemBtPassword,'idBlockPasswordSet');
        itemPassword1.focus();
    }


    function SetPassword()
    {
        if(!IsVisibleBlock("idBlockPasswordSet"))
        {
            OpenWallet();
            return;
        }

        var Passwd1=itemPassword1.value;
        var Passwd2=itemPassword2.value;
        if(Passwd1!==Passwd2)
        {
            SetError("Passwords are not equal");
            return;
        }
        itemPassword1.value="";
        itemPassword2.value="";

        GetData("SetWalletPasswordNew",Passwd1, function (Data)
        {
            if(Data && Data.result===1)
            {
                SetStatus("New password was set");
                SetVisibleBlock("idBlockPasswordSet",false);
                SetImg(itemBtPassword,'idBlockPasswordSet');
            }
        });
    }
    function CancelSetPassword()
    {
        SetVisibleBlock("idBlockPasswordSet",false);
        SetImg(itemBtPassword,'idBlockPasswordSet');
        SetVisibleBlock("idBlockPasswordGet",false);
        SetImg(itemBtPassword,'idBlockPasswordGet');
    }

    function OnEnterPas1(e)
    {
        if(e.keyCode===13)
        {
            if(IsVisibleBlock("idBlockPasswordSet"))
            {
                itemPassword2.focus();
            }
            else
            {
                OpenWallet();
            }
        }
        //SetStatus("e.keyCode="+e.keyCode)
    }
    function OnEnterPas2(e)
    {
        if(e.keyCode===13)
        {
            SetPassword();
        }
        //SetStatus("e.keyCode="+e.keyCode)
    }


</script>





<style>

    table.password
    {
        border-collapse: collapse;
        width: 400px;
    }

    #idOpenWallet
    {
        z-index:1001;
        position:relative;
        float: right;
        top:15px;
        right:0px;
        padding: 0 0 0 20px;
        text-align: center;
        box-shadow: 0 0 0 1px;

        width: 130px;
        height: 40px;
        line-height: 20px;
        margin: 10px;
        background: transparent;
        font-weight: 600;

        background-image: url('/HTML/PIC/lock_closed.png');
        background-repeat: no-repeat;
        background-size: 20%;
        cursor: pointer;
    }

    #idBlockPasswordSet,#idBlockPasswordGet
    {
        z-index:1000;
        position:absolute;
        top:150px;
        right:25%;
        height:150px;
        width:320px;
        padding: 10px;
        background: #d9d9d9;
        text-align: left;
        box-shadow: 0 0 0 1px;

        background-image: url('/HTML/PIC/key.png');
        background-repeat: no-repeat;

    }


    .btutil
    {
        width: 130px;
    }

</style>


<style>
    .red
    {
        color:red;
    }

    ::-webkit-scrollbar
    {
        width: 0px;
    }
    ::-webkit-scrollbar-track-piece
    {
        background-color: transparent;
        -webkit-border-radius: 6px;
    }

    .stat
    {
        min-width: 30px;
        font-weight: bold;
    }


    #idServerLog
    {
        background-color: var(--color2);
    }
    .focusnowrite:focus
    {
        font-style: italic;
    }

</style>


<body>


<DIV align='center'>
    <DIV align='left' style="width: 800px;border2: 1px solid #727473;">

        <table id="TabHeader" class="tabheader">
            <tr>
                <th><DIV id="MTabAccounts" onclick="SelectTab('TabAccounts')" class="bttab">ACCOUNTS</DIV></th>
                <th><DIV id="MTabSend" onclick="SelectTab('TabSend')" class="bttab">SEND</DIV></th>
                <th><DIV id="MTabDapps" onclick="SelectTab('TabDapps')" class="bttab">DApps</DIV></th>
                <th><DIV id="MTabSharding" onclick="SelectTab('TabSharding')" class="bttab">SHARDING</DIV></th>
                <th><DIV id="MTabExplorer" onclick="SelectTab('TabExplorer')" class="bttab">EXPLORER</DIV></th>
            </tr>
        </table>

        <INPUT id="idOpenWallet" style="display: none" type="button" onclick="OnClickOpenCloseWallet()" value="Wallet closed">

        <DIV id="idStatus" style="height: 40px">&nbsp;</DIV>
        <BR><BR><BR>

        <DIV id="TabAccounts" style="display: block">
            <BR>
            <DIV id="idNodeUpdateMiningStatus" style="display: block">
                <DIV style="float: left">
                    <input type="checkbox" class="checkbox" id="idAutoUpdate" onchange = "UseAutoUpdate()"/>
                    <label for="idAutoUpdate">Autoupdate</label>
                </DIV>
                <DIV style="float: left">
                    <input type="checkbox" class="checkbox" id="idUseMining" onchange = "UseMining()"/>
                    <label for="idUseMining">Mining</label>
                </DIV>
                <DIV style="float: left;display: none" id="idMiningParams">
                    <DIV style="float: left; color: blue;">CPU use:<input type="number" min=0 max=100 id="idPercentMining" onchange="SetPercentMining()"/>%</DIV>
                    <DIV style="float: left; margin: 2px 0 0 8px;" id="idStatusMining"></DIV>
                </DIV>
            </DIV>
            <DIV id="idDevelopService" style="display: none">
                <BR>
                <INPUT type="button" id="idDown" onclick="SetVisibleBlock('idDevelopServiceView',!IsVisibleBlock('idDevelopServiceView'));SetImg(this,'idDevelopServiceView')" class="btdoit bt" value="DEV SERVICE">
                <DIV id="idDevelopServiceView" style="display: none">
                    <table>
                        <tr>
                            <td style="width: 100px">
                                <INPUT type="button" class="bt btdoit" onclick="SetCodeVersionJSON()" value="CODE VERS >>"><BR>
                                <INPUT type="button" class="bt btdoit" onclick="SetNetConstJSON()" value="NET CONST >>"><BR>

                            </td>
                            <td style="width: 300px">
                                Value:<INPUT type="string" id="idDevValue" value="0"><BR>
                                <TEXTAREA id="idDevService" rows="15" cols="70"> </TEXTAREA><BR>
                            </td>
                            <td style="width: 200px">
                                <INPUT type="button" class="bt btdoit" style="background-color: #f4f542;color:black;font-weight: bold;height: 50px;width: 100px;" onclick="RunDevelopService()" value="SEND">
                                <INPUT type="button" class="bt btdoit" style="background-color: #58aff5;color:black;height: 24px;width: 100px;" onclick="ConnectToAll()" value="ConnectToAll">
                            </td>
                        </tr>
                    </table>
                    <HR>
                </DIV>
            </DIV>
            <INPUT type="checkbox" id="idChainMode" style="float: right; display: none" onchange="StartDrawBlockInfo()">
            <canvas  width='800' height='30' id='idBlockInfo'></canvas>
            <BR><BR>
            <DIV style="float: left; font-family: monospace">
                Block:<B id="idCurBlockNum"></B>
                DB-delta:<span id="idDeltaDB" class="stat"></span>
                TX-delta:<span id="idDeltaTX" class="stat"></span>
                Protocol:<B id="idWalletVersion"></B>
                Max(tps):<B id="idSpeedSignLib" style="cursor: pointer" onclick='TestSignLib()'></B>
                <span id="idTimeDelta">Time delta:<B id="idDeltaTime"></B></span>
            </DIV>
            <DIV id="idSignLibError" style="display: none;">
                <BR><BR><DIV align='center' style="border: 1px solid #ff791a;padding: 5px"><b class="red">*************** WARNING: VERY SLOW LIBRARY: secp256k1 ***************<BR>Install all dependent packages, see detail: <a href="https://www.npmjs.com/package/secp256k1">https://www.npmjs.com/package/secp256k1</a></b>
            </DIV>
                <BR>
            </DIV>


            <DIV id="wallet_config_tab" style="display: none;float: left">
                Wallet data path: <B id="idDataPath"></B><BR>
                <!--Node addr: <B id="idNodeAddr"></B><BR>-->


                <INPUT type="button" onclick="MoveUp($('edit_keys'));NewPrivateKey();" class="btdoit bt" value="New wallet..." id="idDown2">
                <INPUT type="button" onclick="MoveUp($('edit_keys'));EditPrivateKey();SetImg(this,'edit_keys');" class="btdoit bt" value="Edit wallet" id="idDown">
                <INPUT type="button" onclick="MoveUp($('idAccountEdit'));ViewNewAccount();SetImg(this,'idAccountEdit');" class="btdoit bt" value="New account" id="idDown">
                <INPUT type="button" onclick="MoveUp($('edit_mining_set'));MiningSets();SetImg(this,'edit_mining_set');" class="btdoit bt" value="Set mining" id="idDown">
                <INPUT type="button" onclick="ViewSetPassword();itemBtPassword=this; SetImg(itemBtPassword,'idBlockPasswordSet');" class="bt btdoit" value="Set password" id="idDown">

            </DIV>


            <DIV>
                <DIV id="edit_mining_set" style="display: none">
                    <table class="form_input keys" id="grid_mining_set">
                        <tr>
                            <td><DIV>Mining account:</DIV></td><td><INPUT type="number" id="idMiningAccount" min=0 max=1000000000000 value="0"></td>
                        </tr>

                        <tr>
                            <td></td>
                            <td><INPUT type="button" onclick="SaveMiningSet()" class="bt" value="Save">
                                <INPUT type="button" onclick="CancalMiningSet()" class="bt" value="Cancel"></td>
                        </tr>
                    </table>
                </DIV>

                <DIV id="edit_keys" style="display: none">
                    <table class="form_input keys" id="grid_edit_key">
                        <tr style="font-family: monospace;">
                            <td style="padding-left: 7px"> Public key:</td>
                            <td><DIV id="idPubKey"></DIV></td>
                        </tr>

                        <tr>
                            <td>
                                <select size="1" id="idTypeKey" onkeyup="SelectTypeKey();" onchange="SelectTypeKey();">
                                    <option value="private">Private key</option>
                                    <option value="public">Public key (sign from another wallet)</option>
                                    <option value="brain">Brain key generator</option>
                                </select>
                            </td><td><INPUT type="string" autocomplete="off" id="idKeyNew" value=""></td>
                        </tr>
                        <tr id="idViewKeyNew2" style="display: none">
                            <td>You can repeat the secret words:</td>
                            <td><INPUT type="string" id="idKeyNew2" value=""></td>
                        </tr>



                        <tr>
                            <td></td>
                            <td>
                                <INPUT type="button" onclick="ConvertToPrivateKey()" class="btdoit bt" style="width: 130px;display: none;" id="idBtConvertKey" value="Convert to key">
                                <INPUT type="button" onclick="SavePrivateKey()" class="bt" id="idBtSaveKey" value="Save">
                                <INPUT type="button" onclick="CancelSavePrivateKey()" class="bt" value="Cancel">
                            </td>
                        </tr>
                    </table>
                </DIV>

                <DIV id="idAccountEdit" class="" style="display: none">
                    <table class="form_input keys" id="grid_edit_newacc">
                        <tr>
                            <td>Public name:</td>
                            <td>
                                <INPUT type="string" maxlength="40" style="width: 260px;text-align: left" autocomplete="off" id="idAccountName" onkeyup="CheckLengthAccDesription('idAccountName',40)">
                                Currency:
                                <input type="search" list="idCurrencyList" id="idCurrency" style="width: 130px;text-align: left; height: 22px;padding-right: 20px;" onchange="ValidateCurrency(this)"/>
                                <datalist id="idCurrencyList" style="width: 80px;">
                                    <option value="Loading"></option>
                                </datalist>

                                Smart:
                                <INPUT type="number" id="idSmart" min=0 max=100000000 value="0" style="width: 70px;">
                            </td>
                        </tr>

                        <tr id="idAMIDRow">
                            <td>Advanced miner ID:</td>
                            <td>
                                <INPUT type="number" id="idAMinerID" min=1000000000 max=9999999999 value="0" style="width: 260px;">
                            </td>
                        </tr>


                        <tr>
                            <td>
                            </td>
                            <td><INPUT type="button" onclick="CreateAccount(0)" class="bt" value="Create">
                                <INPUT type="button" onclick="CancelCreateAccount()" class="bt" value="Cancel">
                                <INPUT type="button" onclick="CreateAccount(1)" class="bt btdoit" style="width: 130px;" id="idBtRun" value="Add to Pay list">
                            </td>
                            <td>
                                <span id="idRowWN" style="display: none;">WN:<INPUT type="number" id="idWN" min=0 max=100 style="width: 30px;" value=""></span>
                            </td>
                        </tr>

                    </table>
                </DIV>
            </DIV>


            <BR>
            <table id="grid_accounts" class="grid">
                <tr>
                    <th id="(RetHistoryAccount(Item))" class="num">ID</th>
                    <th id="SUM_TO_STRING(Item.Value)" class="sum bold">Amount</th>
                    <th id="CurrencyNameItem(Item)" data-name="Currency" class="cur hint">Cur</th>
                    <!--<th id="CurrencyNameItemHTML(Item)" data-name="Currency" class="cur hint">Cur</th>-->
                    <th id="Item.Name" data-name="Account name" class="accname hint">Name</th>
                    <th id="Item.Value.OperationID" data-name="Operation ID" class="snum hint">OP</th>
                    <th id="Item.Adviser" data-name="Adviser" class="snum hint">Adv</th>

                    <th id="(RetChangeSmart(Item))" data-name="Smart contract (DApp)" class="smart hint">Smart</th>
                    <th id="Item.WN" class="num" style="width: 30px;"></th>
                    <th id="GetStateItem(Item)" class="hash2">State</th>
                </tr>
            </table>

            <B><DIV id="idMyTotalSum"></DIV></B>


            <INPUT type="button" id="idDown" onclick="MoveUp($('idNetworkView'));ViewNetworkMode();SetImg(this,'idNetworkView')"
                   class="btdoit bt" value="NET CONNECT">
            <INPUT type="button" id="idDown" onclick="MoveUp($('idRemoteView'));ViewRemoteParams();SetImg(this,'idRemoteView')"
                   class="btdoit bt" value="HTTP ACCESS">
            <INPUT type="button" id="idDown" onclick="MoveUp($('idConstantView'));ViewConstant();SetImg(this,'idConstantView')"
                   class="btdoit bt" value="CONSTANTS">
            <INPUT type="button" onclick="FindMyAccounts();" class="btdoit bt" value="Refresh accounts">

            <DIV>
                <DIV id="idNetworkView" style="display: none">
                    <H3>Network connections:</H3>
                    Own IP: <INPUT  maxlength="40" id="idIP">
                    Port: <INPUT maxlength="9" id="idPort">
                    <INPUT type="checkbox" id="idAutoDetectIP" onchange="OnSetNetworkMode()">Auto detect IP
                    <INPUT type="button" onclick="SetNetworkParams(1)" class="btdoit bt" value="Save and Restart">
                    <HR>
                </DIV>

                <DIV id="idRemoteView" style="display: none">
                    <H3>Remote access:</H3>

                    <table class="form_input keys">
                        <tr>
                            <td>HTTP port:</td>
                            <td><INPUT type="string" id="idHTTPPort" maxlength="6" value="80"></td>
                        </tr>
                        <tr>
                            <td>Password on HTTP:</td>
                            <td><INPUT type="string" id="idHTTPPassword"></td>
                        </tr>
                    </table>
                    <BR>
                    <!--<INPUT type="button" onclick="SetRemoteParams(0)" class="btdoit bt" value="Save">-->
                    <INPUT type="button" onclick="SetRemoteParams(1)" class="btdoit bt" value="Save and Restart">
                    <HR>
                </DIV>

                <DIV id="idConstantView" style="display: none">
                    <H3>All constants (only for advanced users):</H3>
                    <TEXTAREA id="idConstant" rows="20" cols="110"> </TEXTAREA><BR>
                    <BR>
                    <INPUT type="button" onclick="SaveConstant(0)" class="btdoit bt" value="Save">
                    <INPUT type="button" onclick="SaveConstant(1)" class="btdoit bt" value="Save and Restart">
                    <HR>
                </DIV>
            </DIV>


            Style:
            <select size="1" id="idSelStyle" onkeyup="SelectStyle();SaveValues()" onchange="SelectStyle();SaveValues()">
                <option value="styleContrast1">Contrast 1</option>
                <option value="styleContrast2">Contrast 2</option>
                <option value="styleContrast3">Contrast 3</option>
                <option value="styleDark">Dark</option>
                <option value="styleGray">Gray</option>
                <option value="styleBrown">Brown</option>
                <option value="styleBlue">Blue</option>
                <option value="styleGreen">Green</option>
            </select>



        </DIV>



        <DIV id="TabSend" style="display: none">

            <DIV id="idSendList"> </DIV>
            <table class="form_input">
                <tr>
                    <td style="min-width: 115px">From account</td>
                    <td>

                        <select size="1" id="idAccount" onkeyup="OnEditTransactionFields()" onchange="OnEditTransactionFields()">
                        </select>

                    </td>
                </tr>
                <tr><td>&nbsp;</td><td><DIV id="idNameTo" class="smallbold"></DIV></td></tr>
                <tr>
                    <td>Pay to</td>
                    <td>
                        <INPUT list="idToList" style="float: left" type="string" maxlength="40" id="idTo" value="" onkeyup="OnEditIdTo()" onchange="OnEditIdTo()" placeholder="Payee (required)" >
                        <datalist id="idToList" style2="width: 80px;">
                            <option value="Loading"></option>
                        </datalist>


                    </td>
                </tr>
                <tr>
                    <td>Amount</td>
                    <td>
                        <INPUT type="number" id="idSumSend" style="color:#1e21cb" value="" step=0 min=0 max=1000000000 onkeyup="OnEditTransactionFields()" onchange="OnEditTransactionFields()">&nbsp;
                        <button style="font-family: monospace;" onclick="SetAllSum()">←</button>
                        <B id="idCoinName"></B>
                    </td>
                </tr>
                <tr>
                    <td>Description (optional)</td><td><textarea id="idDescription" rows="4" onkeyup="CheckLengthAccDesription('idDescription',200);OnEditTransactionFields()" onchange="OnEditTransactionFields()"></textarea></td>
                    <td><DIV id="idAttach"> </DIV></td>
                </tr>
                <tr>
                    <td>
                    </td>
                    <td>
                        <INPUT type="button" onclick="ClearTransaction()" class="bsend bt" value="Clear">
                        <INPUT type="button" onclick="EditJSONTransaction();SetImg(this,'edit_transaction');" class="bsend bt" value="Edit JSON" id="idDown">
                        <INPUT type="button" onclick="SendMoneyBefore()" class="bsend bt" id="idSendButton" value="Send" >
                    </td>
                </tr>
            </table>
            <DIV id="edit_transaction" style="display: none">
                <textarea id="idTransaction" rows="20" onkeyup="StartEditTransactionJSON()" onchange="StartEditTransactionJSON()"></textarea>
                <BR>
                <INPUT type="button" onclick="SignJSON()" class="btdoit bt" value="Sign JSON" id="idSignJSON">
                <INPUT type="button" onclick="SendMoneyJSON()" class="btdoit bt" value="Send from JSON">
                <INPUT type="button" onclick="SendMoneyTest()" class="btdoit bt" value="Send TEST">
            </DIV>

            <script>
                function SetAllSum()
                {
                    var Item=MapAccounts[$("idAccount").value];
                    if(Item)
                    {
                        $("idSumSend").value=FLOAT_FROM_COIN(Item.Value);//ToFixed(FLOAT_FROM_COIN(Item.Value));//,Item.Currency); - all (9 digital) precision
                    }
                }
            </script>


        </DIV>


        <DIV id="TabDapps" style="display: none">


            <INPUT type="button" onclick="window.Open('./HTML/dapp-edit.html','smart',1240)" class="btdoit btopen bt" id="idOpenSmart" value="DAPP IDE">


            <BR>
            <DIV id="idPaginationDapps" style="display: block">
                <!--<DIV id="view_header" >DAPPS</DIV><BR>-->
                Search:<INPUT type="search" id="idViewDappsFilter" value="" onchange="CheckNewSearch(DefDapps); ViewCurrent(DefDapps)">
                Category:
                <select size="1" id="idCategory" onchange="ViewCurrent(DefDapps)">
                </select>
                <BR>

                <INPUT type="button" onclick="ViewBegin(DefDapps)" class="btscrollm bt" value="|&lt;-">
                <INPUT type="button" onclick="ViewPrev(DefDapps)" class="btscroll bt" value="&lt;&lt; Prev">
                <INPUT type="number" id="idViewDappNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefDapps)">
                <INPUT type="button" onclick="ViewNext(DefDapps,MaxDappsID)" class="btscroll bt" value="Next &gt;&gt;">
                <INPUT type="button" onclick="ViewEnd(DefDapps,MaxDappsID)" class="btscrollm bt" value="-&gt;|">

                <table id="grid_dapps_all" class="grid">
                    <tr>
                        <th id="(RetNumDapp(Item))" class="num">ID</th>
                        <th id="(RetOpenDapps(Item,0,0))" class="accname">Name</th>
                        <th id="Item.Description" class="code">Description</th>
                        <th id="(RetCategory(Item))" class="">Category</th>

                        <th id="(RetBaseAccount(Item))" class="num">Base Account</th>

                        <th id="(RetHistoryAccount(Item,'Owner'))" class="num">Owner</th>

                        <th id="RetBool(Item.TokenGenerate)" class="bool">Token generate</th>
<!--                        <th id="Item.CrossMsgConfirms" class="num">Cross confirms</th>-->

                        <!--<th id="Item.ISIN" class="num">ISIN</th>-->
                        <th id="(RetOpenBlock(Item.BlockNum,1))" class="num">Block Num</th>

                        <!--<th id="GetHexFromArr(Item.SumHash)" class="hash">SumHash</th>-->

                    </tr>
                </table>


                <INPUT type="button" onclick="ViewPrev(DefDapps)" class="btscroll bt" value="&lt;&lt; Prev">
                <INPUT type="button" onclick="ViewNext(DefDapps,MaxDappsID)" class="btscroll bt" value="Next &gt;&gt;">

            </DIV>


        </DIV>


        <DIV id="TabExplorer" style="display: none">

            <div class="findtxid"><span style="padding-top: 8px">Find Tx: </span><INPUT type="search" class="radius" id="idFindTx" placeholder="Type TxID..."><button style="margin-left: 5px" onclick="OnFindTx('idFindTx')">Find</button></div>

            <INPUT type="button" onclick="window.Open('./HTML/stat.html','counters',920)" class="btdoit btopen bt" id="idCounters" value="Counters">
            <INPUT type="button" onclick="window.Open('./HTML/console.html','console',1240)" class="btdoit btopen bt" id="idConsole" value="Console">
            <INPUT type="button" onclick="window.Open('./HTML/monitor.html','monitor',1200)" class="btdoit btopen bt" id="idMonitor" value="Monitor">
            <INPUT type="button" onclick="window.Open('./HTML/network.html','network',1200)" class="btdoit btopen bt" id="idNetwork" value="Network">
            <INPUT type="button" onclick="ViewCurrent({BlockName:'idUtilView'},1,this);SetImg(this,'idUtilView');" class="btdoit bt btexlporer" id="idDown" value="Utilites">



            <BR>
            <INPUT type="button" onclick="ViewCurrent(DefAccounts,1,this);" class="btdoit bt btexlporer" id="idDown" value="Accounts">
            <INPUT type="button" onclick="ViewCurrent(DefBlock,1,this)" class="btdoit bt btexlporer" id="idDown" value="Blocks & Tx">
            <INPUT type="button" onclick="ViewCurrent(DefActs,1,this)" class="btdoit bt btexlporer" id="idDown" value="Accounts acts">
<!--            <INPUT type="button" disabled=1" class="btdoit btexlporer" style="background-color: transparent;border-color: transparent" value=" ">-->
            <INPUT type="button" onclick="ViewCurrent(DefJournal,1,this)" class="btdoit bt btexlporer" id="idDown" value="Journal">
            <INPUT type="button" onclick="ViewCurrent(DefHash,1,this)" class="btdoit bt btexlporer" id="idDown" value="Accounts hash">



            <BR>
            <DIV>
                <DIV id="idPaginationAccount" style="display: none">
                    <HR>
                    <DIV id="view_header" >Accounts</DIV><BR>
                    Search:<INPUT type="search" id="idViewAccountFilter" value="" onchange="CheckNewSearch(DefAccounts); ViewCurrent(DefAccounts)">
                    <INPUT type="button" onclick="ViewBegin(DefAccounts)" class="btscrollm bt" value="|&lt;-">
                    <INPUT type="button" onclick="ViewPrev(DefAccounts)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="number" id="idViewAccountNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefAccounts)">
                    <INPUT type="button" onclick="ViewNext(DefAccounts,MaxAccID)" class="btscroll bt" value="Next &gt;&gt;">
                    <INPUT type="button" onclick="ViewEnd(DefAccounts,MaxAccID)" class="btscrollm bt" value="-&gt;|">

                    <table id="grid_accounts_all" class="grid">
                        <tr>
                            <th id="(RetHistoryAccount(Item))" class="num">ID</th>
                            <th id="SUM_TO_STRING(Item.Value)" class="sum smallbold">Amount</th>
                            <th id="CurrencyNameItem(Item)" class="cur">Cur</th>
                            <th id="Item.Name" class="accname">Name</th>
                            <th id="Item.PubKeyStr" class="pubkey">PubKey</th>
                            <th id="Item.Value.OperationID" class="num">Operation</th>
                            <th id="Item.Adviser" class="num">Adv</th>
                            <th id="Item.Value.Smart" class="num">Smart</th>
                            <th id="(RetOpenBlock(Item.BlockNumCreate,1))" class="num">Block Num</th>
                            <th id="GetStateItem2(Item)" class="hash2">State</th>
                        </tr>
                    </table>

                    <INPUT type="button" onclick="ViewPrev(DefAccounts)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="button" onclick="ViewNext(DefAccounts,MaxAccID)" class="btscroll bt" value="Next &gt;&gt;">

                    <BR>
                    <B><DIV id="idTotalSum"></DIV></B>
                    <BR>
                </DIV>

                <DIV id="idPaginationBlock" style="display: none">
                    <HR>
                    <DIV id="view_header" >Blocks<BR></DIV>
                    <!--<DIV id="idFilterB">JS:<INPUT type="search" id="idViewBlockFilter"  value="" onchange="ViewCurrent(DefBlock)"></DIV>-->
                    <INPUT type="button" onclick="ViewBegin(DefBlock)" class="btscrollm bt" value="|&lt;-">
                    <INPUT type="button" onclick="ViewPrev(DefBlock)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="number" id="idViewBlockNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefBlock)">
                    <INPUT type="button" onclick="ViewNext(DefBlock,ServerBlockNumDB)" class="btscroll bt" value="Next &gt;&gt;">
                    <INPUT type="button" onclick="ViewEnd(DefBlock,ServerBlockNumDB)" class="btscrollm bt" value="-&gt;|">

                    <table id="grid_block_all" class="grid">
                        <tr>

                            <th id="(RetOpenBlock(Item.BlockNum,Item.TrDataLen))" class="num">Num</th>
                            <th id="(DateFromBlock(Item.BlockNum,1))" class="date">Date</th>
                            <th id="GetHexFromArr(Item.TreeHash)" class="hash">Tx Hash</th>
                            <th id="GetHexFromArr(Item.PowHash)" class="hash">PowHash</th>
                            <th id="GetHexFromArr(Item.Hash)" class="hash">Hash</th>

<!--                            <th id="GetHexFromArr(Item.PrevHash)" class="hash">PrevHash</th>-->
<!--                            <th id="GetHexFromArr(Item.SeqHash)" class="hash">SeqHash</th>-->
<!--                            <th id="GetHexFromArr(Item.SumHash)" class="hash">SumHash</th>-->
<!--                            <th id="GetHexFromArr(Item.AddrHash)" class="hash">AddrHash</th>-->
<!--                            <th id="Item.SumPow" class="num">SumPow</th>-->

                            <th id="Item.TrDataLen" class="num">Count</th>
                            <th id="Item.Power" class="num">Pow</th>
                            <th id="(RetHistoryAccount(Item,'Miner')+'<BR><b>'+(Item.MinerName?Item.MinerName:''))+'</b>'" class="num">Miner</th>


                            <!--<th id="GetHexFromArr(Item.Hash1)" class="hash">Hash1</th>-->
                            <!--<th id="GetHexFromArr(Item.Hash2)" class="hash">Hash2</th>-->

<!--                            <th id="GetHexFromArr(Item.AddrHash)" class="hash">MinerHash</th>-->

                            <!--<th id="ReadUintFromArr(Item.AddrHash,6)" class="hash">Nonce0</th>-->
                            <!--<th id="ReadUintFromArr(Item.AddrHash,12)" class="hash">Nonce1</th>-->
                            <!--<th id="ReadUintFromArr(Item.AddrHash,18)" class="hash">Nonce2</th>-->


                            <!--<th id="GetPowPower(Item.Hash1)" class="num">Pow1</th>-->
                            <!--<th id="GetPowPower(Item.Hash2)" class="num">Pow2</th>-->
                        </tr>
                    </table>

                    <INPUT type="button" onclick="ViewPrev(DefBlock)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="button" onclick="ViewNext(DefBlock,ServerBlockNumDB)" class="btscroll bt" value="Next &gt;&gt;">

                </DIV>


                <DIV id="idPaginationJournal" style="display: none">
                    <HR>
                    <DIV id="view_header" >Journal rows<BR></DIV>
                    Block:<INPUT type="search" id="idViewJournalRunBlockNum" value="" onchange="SetRowByBlockNum(DefJournal);">
                    <INPUT type="button" onclick="ViewBegin(DefJournal)" class="btscrollm bt" value="|&lt;-">
                    <INPUT type="button" onclick="ViewPrev(DefJournal)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="number" id="idViewJournNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefJournal)">
                    <INPUT type="button" onclick="ViewNext(DefJournal,MaxJournalNum)" class="btscroll bt" value="Next &gt;&gt;">
                    <INPUT type="button" onclick="ViewEnd(DefJournal,MaxJournalNum)" class="btscrollm bt" value="-&gt;|">


                    <table id="grid_journal" class="grid">
                        <tr>
                            <th id="Item.Num" class="num">Num</th>
                            <th id="(RetOpenBlock(Item.BlockNum,1))" class="num">Block</th>
                            <th id="GetHexFromArr(Item.SumHash)" class="hash">Sum Hash</th>
                            <th id="(RetVerify(Item.VerifySumHash))" class="bool">S</th>
                            <th id="GetHexFromArr(Item.AccHash)" class="hash">Acc Hash</th>
                            <th id="(RetVerify(Item.VerifyAccHash))" class="bool">A</th>
                            <th id="Item.Tables" class="name">Tables</th>
<!--                            <th id="Item.TableArr.length" class="num">Tables</th>-->
                            <th id="Item.DataSize" class="num">Bytes</th>
                        </tr>
                    </table>
                    <INPUT type="button" onclick="ViewPrev(DefJournal)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="button" onclick="ViewNext(DefJournal,MaxJournalNum)" class="btscroll bt" value="Next &gt;&gt;">

                </DIV>

                <DIV id="idPaginationAct" style="display: none">
                    <HR>
                    <DIV id="view_header" >Accounts acts<BR></DIV>
                    Block:<INPUT type="search" id="idViewActBlockNum" value="" onchange="SetNewActSearch(DefActs);">
                    <INPUT type="button" onclick="ViewBegin(DefActs)" class="btscrollm bt" value="|&lt;-">
                    <INPUT type="button" onclick="ViewPrev(DefActs)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="number" id="idViewActNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefActs)">
                    <INPUT type="button" onclick="ViewNext(DefActs,MaxActNum)" class="btscroll bt" value="Next &gt;&gt;">
                    <INPUT type="button" onclick="ViewEnd(DefActs,MaxActNum)" class="btscrollm bt" value="-&gt;|">


                    <table id="grid_acts_all" class="grid">
                        <tr>
                            <th id="Item.Num" class="num">Num</th>
                            <th id="Item.ID" class="num">Account</th>
                            <th id="Item.Mode">Mode</th>
                            <th id="(RetOpenBlock(Item.BlockNum,1))" class="num">Block</th>
                            <th id="Item.TrNum" class="num">TrNum</th>
                            <th id="(escapeHtml(DateFromBlock(Item.BlockNum,1)))" class="date">Date</th>

                            <th id="Item.PrevValue.OperationID" class="num">Prev. Operation</th>
<!--                            <th id="SUM_TO_STRING(Item.PrevValue)" class="sum">Value</th>-->
                            <th id="(PrevValueToString(Item))" class="hash">Value</th>
                            <th id="Item.PrevValue.NextPos" class="num">Prev. History</th>
                        </tr>
                    </table>
                    <INPUT type="button" onclick="ViewPrev(DefActs)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="button" onclick="ViewNext(DefActs,MaxActNum)" class="btscroll bt" value="Next &gt;&gt;">

                </DIV>

                <DIV id="idPaginationHash" style="display: none">
                    <HR>
                    <DIV id="view_header" >Accounts hash<BR></DIV>
                    Block:<INPUT type="search" id="idViewAccHashBlockNum" value="" onchange="SetNewAccHashSearch(DefHash);">
                    <INPUT type="button" onclick="ViewBegin(DefHash)" class="btscrollm bt" value="|&lt;-">
                    <INPUT type="button" onclick="ViewPrev(DefHash)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="number" id="idViewHashNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefHash)">
                    <INPUT type="button" onclick="ViewNext(DefHash,CONFIG_DATA.MAX_ACCOUNT_HASH)" class="btscroll bt" value="Next &gt;&gt;">
                    <INPUT type="button" onclick="ViewEnd(DefHash,CONFIG_DATA.MAX_ACCOUNT_HASH)" class="btscrollm bt" value="-&gt;|">

                    <table id="grid_hash_all" class="grid">
                        <tr>
                            <th id="Item.Num" class="num">Num</th>
                            <th id="(RetOpenBlock(Item.BlockNum,3))" class="">Block</th>
                            <th id="(escapeHtml(DateFromBlock(Item.BlockNum,1)))" class="date">Date</th>
                            <th id="GetHexFromArr(Item.AccHash)" class="code">AccHash</th>
                            <th id="GetHexFromArr(Item.SumHash)" class="code">SumHash</th>
                            <th id="Item.AccountMax" class="num">Account Max</th>
                            <th id="Item.SmartCount" class="num">Smarts Count</th>
                            <th id="GetHexFromArr(Item.SmartHash)" class="code">SmartHash</th>
                            <th id="(RetHistoryAccount(Item,'Miner'))+'</b>'" class="num">Miner</th>
                            <th id="(Item.VerifyHTML)" class="verify">Verify</th>
                        </tr>
                    </table>
                    <INPUT type="button" onclick="ViewPrev(DefHash)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="button" onclick="ViewNext(DefHash,CONFIG_DATA.MAX_ACCOUNT_HASH)" class="btscroll bt" value="Next &gt;&gt;">
                </DIV>

                <DIV id="idUtilView" style="display: none">
                    <HR>
                    <DIV id="view_header" >NETWORK UTILITES<BR></DIV><BR>

                    Node ip: <INPUT class="child-node" maxlength="40" id="idChildIP"> Port: <INPUT class="child-node" type="number" id="idChildPort" value="30000"> Score: <INPUT class="child-node" type="number" id="idChildScore" value="0">
                    <INPUT type="button" onclick="AddSetNode()" class="btdoit btutil bt" value="Add/set node">

                    <HR>
                    <DIV id="view_header" >BLOCKCHAIN UTILITES<BR></DIV><BR>

                    Number of blocks in depth:<INPUT type="number" id="idBlockCount" onchange = "SaveValues()" value="0"><BR>
                    <INPUT type="button" onclick="StartLoadNewCode();InitArrInfo();" class="btdoit btutil bt" value="Update code">
                    <INPUT type="button" onclick="RewriteTransactions()"  class="bt btdoit btutil" value="Rewrite tx">
                    <INPUT type="button" onclick="RewriteAllTransactions()"  class="bt btdoit btutil" value="Rewrite All tx">
                    <INPUT type="button" onclick="TruncateBlockChain()" class="btdoit btutil bt" value="Truncate chain">
                    <INPUT type="button" onclick="ClearDataBase();InitArrInfo();" class="btdoit btutil bt" value="Clear DataBase">
                    <INPUT type="button" onclick="RestartNode()"  class="btdoit btopen bt" value="Restart node">



                    <DIV id="idDevelopService2">
                        <HR>
                        <BR>
                        <textarea id="idRunText" rows="8" cols="98" autofocus></textarea>
                        <BR>
                        <INPUT type="button" onclick="SetRun()"  class="bt btdoit" value="Set run">
                    </DIV>

                    <BR>

                </DIV>
            </DIV>

        </DIV>

        <DIV id="TabSharding" style="display: none">

            <DIV style="float: left;padding-top: 18px;">
                <input type="checkbox" class="checkbox" id="idUseMiningShards" onchange = "UseMiningShards()"/>
                <label for="idUseMiningShards">Mining cross-tx</label>
            </DIV>

            <INPUT type="button" onclick="ViewCurrent(DefShard,1,this)" class="btdoit bt btexlporer" id="idDown" value="Shards">
            <INPUT type="button" onclick="ViewCurrent(DefCrossOut,1,this)" class="btdoit bt btexlporer" id="idDown" value="Msg send">
            <INPUT type="button" onclick="ViewCurrent(DefCrossIn,1,this)" class="btdoit bt btexlporer" id="idDown" value="Msg receive">




            <BR>
            <DIV>
                <DIV id="idPaginationCrossSend" style="display: none">
                    <HR>
                    <DIV id="view_header" >Msg Send<BR></DIV>
<!--                    Block:<INPUT type="search" id="idViewCrossOutBlockNum" value="" onchange="SetRowByBlockNum(DefCrossOut);">-->
                    <INPUT type="button" onclick="ViewBegin(DefCrossOut)" class="btscrollm bt" value="|&lt;-">
                    <INPUT type="button" onclick="ViewPrev(DefCrossOut)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="number" id="idViewCrossOutNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefCrossOut)">
                    <INPUT type="button" onclick="ViewNext(DefCrossOut,MaxCrossOutNum)" class="btscroll bt" value="Next &gt;&gt;">
                    <INPUT type="button" onclick="ViewEnd(DefCrossOut,MaxCrossOutNum)" class="btscrollm bt" value="-&gt;|">


                    <table id="grid_cross_send" class="grid">
                        <tr>
<!--                            <th id="Item.Num" class="num">Num</th>-->
                            <th id="Item.RowNum" class="num">Row</th>
<!--                            <th id="Item.Position" class="num">Position</th>-->
                            <th id="(RetOpenBlock(Item.BlockNum,1))" class="num">Block</th>
                            <th id="(escapeHtml(DateFromBlock(Item.BlockNum,1)))" class="date">Date</th>

<!--                            <th id="Item.Mode" class="num">Mode</th>-->
                            <th id="Item.Msg.Iteration" class="num">Iter</th>
                            <th id="Item.Msg.Confirms" class="num">C</th>
                            <th id="Item.Msg.TxNumFrom" class="num">Tx</th>
                            <th id="Item.Msg.ShardFrom+':'+Item.Msg.AccountFrom" class="name">From</th>
                            <th id="Item.Msg.ShardTo+':'+Item.Msg.AccountTo" class="name">To</th>
                            <th id="Item.Msg.MethodName" class="hash2">Method</th>
                            <th id="Item.Msg.Params" class="hex">Params</th>
                            <th id="GetHexFromArr(Item.RowHash)" class="hash">RowHash</th>
<!--                            <th id="Item.Confirms" class="num">confirms</th>-->

<!--                            <th id="Item.Position" class="num">Position</th>-->
                        </tr>
                    </table>
                    <BR>
                    <INPUT type="button" onclick="ViewPrev(DefCrossOut)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="button" onclick="ViewNext(DefCrossOut,MaxCrossOutNum)" class="btscroll bt" value="Next &gt;&gt;">

                </DIV>

                <DIV id="idPaginationCrossReceive" style="display: none">
                    <HR>
                    <DIV id="view_header" >Msg Receive<BR></DIV>
                    <!--                    Block:<INPUT type="search" id="idViewCrossInBlockNum" value="" onchange="SetRowByBlockNum(DefCrossIn);">-->
                    <INPUT type="button" onclick="ViewBegin(DefCrossIn)" class="btscrollm bt" value="|&lt;-">
                    <INPUT type="button" onclick="ViewPrev(DefCrossIn)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="number" id="idViewCrossInNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefCrossIn)">
                    <INPUT type="button" onclick="ViewNext(DefCrossIn,MaxCrossInNum)" class="btscroll bt" value="Next &gt;&gt;">
                    <INPUT type="button" onclick="ViewEnd(DefCrossIn,MaxCrossInNum)" class="btscrollm bt" value="-&gt;|">


                    <table id="grid_cross_receive" class="grid">
                        <tr>
                            <!--                            <th id="Item.Num" class="num">Num</th>-->
                            <th id="(RetOpenBlock(Item.BlockNumAdd,1,Item.RowNum))" class="num">Row</th>
                            <th id="(escapeHtml(DateFromBlock(Item.BlockNum,1)))" class="date">Date</th>
                            <th id="Item.Msg.Iteration" class="num">Iter</th>
                            <th id="Item.Msg.TxNumFrom" class="num">Tx</th>
                            <th id="Item.Msg.ShardFrom+':'+Item.Msg.AccountFrom" class="name">From</th>
                            <th id="Item.Msg.ShardTo+':'+Item.Msg.AccountTo" class="name">To</th>
                            <th id="Item.Msg.MethodName" class="hash2">Method</th>
                            <th id="Item.Msg.Params" class="hex">Params</th>

                            <th id="Item.StatusStr" class="num">Status</th>
                            <th id="(RetOpenBlock(Item.BlockNumVote,1,Item.ConfirmsStr))" class="num">C</th>
<!--                            <th id="Item.Height" class="num">Height</th>-->
<!--                            <th id="Item.HeightStart" class="num">HeightStart</th>-->
<!--                            <th id="(RetOpenBlock(Item.BlockNumVote,1))" class="num">Last vote</th>-->

                            <th id="(RetOpenBlock(Item.BlockNumRun,1))" class="num">Run</th>

<!--                            <th id="Item.HeightStart" class="num">Start</th>-->
                            <th id="Item.BlockNumRun?Item.BlockNumRun-Math.min(Item.BlockNum,Item.BlockNumAdd):''" class="num">Delta</th>

                            <th id="GetHexFromArr(Item.RowHash)" class="hash">RowHash</th>
                            <th id="Item.Receive" class="name">Receive</th>


<!--                            <th id="GetHexFromArr(Item.DataHash)" class="hash">DHash</th>-->

                            <!--                            <th id="Item.Position" class="num">Position</th>-->
                        </tr>
                    </table>
                    <BR>
                    <INPUT type="button" onclick="ViewPrev(DefCrossIn)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="button" onclick="ViewNext(DefCrossIn,MaxCrossInNum)" class="btscroll bt" value="Next &gt;&gt;">

                </DIV>



                <DIV id="idPaginationShard" style="display: none">
                    <HR>
                    <DIV id="view_header" >Shards<BR></DIV>
                    <INPUT type="button" onclick="ViewBegin(DefShard)" class="btscrollm bt" value="|&lt;-">
                    <INPUT type="button" onclick="ViewPrev(DefShard)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="number" id="idViewShardNum" style="text-align: center" value="0" min=0 max=1000000000 onchange="ViewCurrent(DefShard)">
                    <INPUT type="button" onclick="ViewNext(DefShard,MaxShardNum)" class="btscroll bt" value="Next &gt;&gt;">
                    <INPUT type="button" onclick="ViewEnd(DefShard,MaxShardNum)" class="btscrollm bt" value="-&gt;|">


                    <table id="grid_shard" class="grid">
                        <tr>
                            <th id="Item.Num" class="num">Num</th>
                            <th id="(RetOpenBlock(Item.BlockNum,1))" class="num">Block</th>
                            <th id="Item.ShardName+'-'+Item.Confirms" class="name">Name-confirms</th>
                            <th id="Item.Description" class="name">Description</th>

                            <th id="(RetOpenBlock(Item.MaxVBlock.BlockNum,1,Item.MaxVBlock.Height))" class="num">MaxHeight</th>
                            <th id="GetHexFromArr(Item.MaxVBlock.Hash)" class="hash">Hash</th>
<!--                            <th id="Item.MaxVBlock.RowNum" class="num">MaxRow</th>-->
                            <th id="GetHexFromArr(Item.MaxVBlock.RowHash)" class="hash">RowHash</th>
                            <th id="formatDate(new Date(Item.CheckTime))" class="date">CheckTime</th>

<!--                            <th id="Item.System" class="num">System</th>-->

<!--                            <th id="GetHexFromArr(Item.LastHash)" class="hash">Hash</th>-->

<!--                            <th id="Item.Pos" class="num">Pos</th>-->
                        </tr>
                    </table>
                    <BR>
                    <INPUT type="button" onclick="ViewPrev(DefShard)" class="btscroll bt" value="&lt;&lt; Prev">
                    <INPUT type="button" onclick="ViewNext(DefShard,MaxShardNum)" class="btscroll bt" value="Next &gt;&gt;">

                    <HR>
                    New shard: <INPUT maxlength="6" id="idShardName" style="width: 80px;">
                    Confirms: <INPUT  type="number" min=0 max=100000 id="idShardConfirms" value="10" style="width: 60px;">
                    Description: <INPUT class="" maxlength="40" id="idShardDescription" style="width: 200px;">
                    <BUTTON onclick="CreateNewShard()" class="btdoit btutil bt">Send to pay</BUTTON>

                </DIV>


            </DIV>


        </DIV>

        <BR>
        <DIV id="idServerBlock" style="width: 99.5%">
            <HR>
            <div id="idServerLogHeader"> Log from node. Detail level: <b id="idLogLevelText">-</b> <input type="range" min="0" max="3" id="idLogLevel" oninput="ChangeLog()" value="0"></div>

            <textarea wrap="off" rows="15" cols="250"  id="idServerLog" class="focusnowrite" readonly>
            </textarea>

        </DIV>


        <FORM id="idBlockPasswordSet" style="display: none">
            <H3 align="center">Enter new password:</H3>
            <table class="password" id="idTablePassword1">
                <tr style="display: none">
                    <td><DIV>Login:</DIV></td><td><INPUT type="string"  id="Login1" value=""></td>
                </tr>
                <tr>
                    <td><DIV>Password:</DIV></td><td><INPUT type="password"  autocomplete="WalletPassword" id="idPassword1" value=""></td>
                </tr>
                <tr>
                    <td><DIV>Repeat:</DIV></td><td><INPUT type="password"  autocomplete="WalletPassword" id="idPassword2" onkeyup="" value=""></td>
                </tr>

                <tr>
                    <td></td>
                    <td><INPUT type="button" onclick="SetPassword()" class="bt" value="Set">
                        <INPUT type="button" onclick="CancelSetPassword()" class="bt" value="Cancel"></td>
                </tr>

            </table>
        </FORM>
        <FORM id="idBlockPasswordGet" style="display: none">
            <H3 align="center">Enter your password:</H3>
            <table class="password" id="idTablePassword2">
                <tr style="display: none">
                    <td><DIV>Login:</DIV></td><td><INPUT type="string"  id="Login2" value=""></td>
                </tr>
                <tr>
                    <td><DIV>Password:</DIV></td><td><INPUT type="password"  autocomplete="WalletPassword" id="idPasswordGet" value=""></td>
                </tr>
                <tr>
                    <td></td>
                    <td><INPUT type="button" onclick="SetPassword()" class="bt" value="Set">
                        <INPUT type="button" onclick="CancelSetPassword()" class="bt" value="Cancel"></td>
                </tr>
            </table>
        </FORM>



        <DIV id="idBlockOnSend" style="display: none">
            <DIV align="center">
                Send
                <B id="idOnSendText"></B>
                <B id="idOnSendSum" style='color:#ff4534'></B> <span id="idOnSendCoinName"></span> <span id="idOnSendToName"></span>


                <BR><DIV id="idOnSendWarning" style='color: yellow;'>WARNING: You are about to send a very large amount!</DIV>




                <BR>
                <button onclick="SendMoney2()" id="idBtOnSend" class="radius">Send</button>
                <button onclick='SetVisibleBlock("idBlockOnSend",0);' class="radius">Cancel</button>

                <DIV align="left">
                    <DIV id="idCheckOnSend"><input type="checkbox" id="idWhiteOnSend"/> Add this account to white list</DIV>
                </DIV>
            </DIV>
        </DIV>


        <audio style="visibility: hidden;" controls="controls" id="sound_coin">
            <source src="coin.mp3" type="audio/mpeg"/>
        </audio>
        <audio style="visibility: hidden;" controls="controls" id="sound_err">
            <source src="click.mp3" type="audio/mpeg"/>
        </audio>


    </DIV>
</DIV>


<!--modal support for dapp-->
<style id="idModalCSS">
    /*modal support*/
    #idOverlay
    {
        position: fixed;
        width: 100%;
        height: 100vh;
        top: 0;
        left:0;
        display: none;
        background: rgba(68, 83, 104, 0.65);
    }
    .ModalDlg
    {
        z-index: 1000;
        background: #fff;
        border-radius: 5px;
        border: 1px solid #727473;
        box-shadow: 0px 8px 10px rgba(68, 83, 104, 0.15);
        color: #000;
        position: fixed;
        padding: 20px;
        margin: 0 auto;
        width: 90%;
        top: 30%;
        left: 50%;
        transform: translate(-50%, -50%);
        max-width: 250px;
    }

    .bt-confirm
    {
        border-radius: 4px;
        min-height: 14px;
        margin: 5px;
        width: 100px;
        height: 36px;

        color:white;
        background-color: #53687e;
        border-color: #445368;
    }

    .bt-confirm:hover
    {
        color: #cb763a;
        cursor: pointer;
    }
</style>
<div id="idOverlay" onclick="closeModal()" style="display: none;"></div>
<section id="idConfirm" class="ModalDlg" style="display: none;">
    <DIV align='center'>
        <h2 id="idConfirmTitle">Confirm</h2>
        <p id="idConfirmText">A you sure?</p>
        <button class="bt-confirm"  onclick="OnConfirmOK()">OK</button>
        <button class="bt-confirm"  onclick="closeModal()">Cancel</button>
    </DIV>
</section>


</body>
</html>

<DIV id="idStableScroll" align='center'>
    <A href="https://terafoundation.org/?utm_source=full_node&utm_medium=link&utm_campaign=wallet">Web-site</A>
    <A href="https://bitcointalk.org/index.php?topic=4573801.0">ANN</A>
    <A href="https://twitter.com/terafoundation">Twitter</A>
    <A href="https://t.me/terafoundation">Telegram</A>
    <A href="https://discord.gg/CvwrbeG">Discord</A>
    <A href="https://jq.qq.com/?_wv=1027&k=5KpN5fw">QQ</A>
    <A href="javascript:OpenOwnWebWallet()">Wallet</A>
    <!--progr76@gmail.com-->
</DIV>


<script>
    function OpenOwnWebWallet()
    {
        if(!CONFIG_DATA.CONSTANTS.HTTP_HOSTING_PORT)
            return;

        var port=CONFIG_DATA.CONSTANTS.HTTP_HOSTING_PORT;
        if(port===80 || port===443)
            port=0;
        window.Open(window.location.protocol+'//'+window.location.hostname+(port?":"+port:"")+'/web-wallet.html')
    }
</script>

