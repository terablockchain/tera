
<script>

    //var
    ALL_ACCOUNTS=1;
    var MaxUserAcc=0;
    var Storage=undefined;
    var ActualMap={};

    //1
    var TabArr=[{name:"TabStart"},{name:"TabDeposit"},{name:"TabSwap"},{name:"TabInvest"},{name:"TabVote"},{name:"TabOperate"}, {name:"SubDeposit"},{name:"SubWithdraw"}];



    //2 TAB TAB
    window.addEventListener('Init',function ()
    {

        if(OPEN_PATH.substr(0,3)==="Tab")
        {
            SelectTab(OPEN_PATH);
        }
        else
        {
            SelectTab("");
        }
        window.addEventListener('History',function (e)
        {
            var Data=e.detail;
            OPEN_PATH=Data.OPEN_PATH;
            if(OPEN_PATH.substr(0,3)==="Tab")
            {
                SelectTab(OPEN_PATH);
            }
        });
    });

    function SelectTab(name,bNoLocation)
    {
        if(typeof name!=="string")
        {
            name=name.id.substring(1);
        }

        $("idCurTabName").value=name;
        if(!bNoLocation)
            SetLocationPath(name);

        SetVisibleTab();
        if(name==="TabSwap")
            SwapInfo();
        if(name==="TabInvest")
            LiqInfo();
    }

    function SetVisibleTab()
    {
        var CurTabName=$("idCurTabName").value;
        if(!CurTabName || CurTabName==="undefined")
            CurTabName=TabArr[0].name;

        var Type=CurTabName.substring(0,1);

        for (var i=0;i<TabArr.length;i++)
        {
            var Param=TabArr[i];
            var name=Param.name;

            var CurType=name.substring(0,1);
            if(CurType!==Type)
                continue;

            var Item=$(name);
            if(!Item)
                continue;
            var ItemM=$("M"+name);
            if(ItemM)
            {
                ItemM.className=ItemM.className.replace(" current", "")
                if(CurTabName===name)
                    ItemM.className+=" current";
            }

            if(CurTabName===name)
            {
                Item.style.display = 'block';
                if(Param.F)
                    Param.F();
            }
            else
            {
                Item.style.display = 'none';
            }
        }

        var vRow=CurTabName==="TabStart"?"table-row":0;
        SetVisibleBlock("idMintedRow",vRow);
        SetVisibleBlock("idPoolRow",vRow);
        SetVisibleBlock("idCommInfo",CurTabName==="TabStart");
    }


    //------------------------

    window.addEventListener('Event',function(e)
    {
        var Data=e.detail;
        var Description=Data.Description;
        if(Data.Error)
        {
            SetError(Description);
        }
        else
        {
            var Str=JSON.stringify(Description);
            ToLog("Event:"+Str);
            if(typeof Description==="object")
                Description=Str;
            SetStatus(Str);
        }
    });

    window.addEventListener('UpdateInfo',function ()
    {
        UpdateFillUser();
        UpdateKeysInfo();
    });

    function UpdateKeysInfo()
    {
        var KeyArr=["Pools"];
        var KeyName=[];
        var AccObj=USER_ACCOUNT_MAP[MaxUserAcc];
        if(AccObj)
        {
            var Key0="AMOUNT:"+GetHexFromArr(AccObj.PubKey)+":";
            KeyArr.push(Key0+"0");
            KeyName.push("TERA");
            if(Storage)
            {
                KeyName.push("DAO");
                KeyName.push("USD");
                KeyArr.push(Key0+Storage.DAONum);
                KeyArr.push(Key0+Storage.USDNum);
            }
        }

        //ToLog(KeyArr)

        Call(0,"GetKeyValueArr",{Keys:KeyArr},[],function (Err,RetArr)
        {
            if(Err)
                return;
            var Str="";
            for(var i=0;i<RetArr.length;i++)
            {
                var Key=KeyArr[i];
                if(Key==="Pools")
                {
                    Storage=RetArr[i];
                }
                else
                {
                    Key=KeyName[i-1];
                    ActualMap[Key]=RetArr[i];
                }
                Str+=Key+":\n"+JSON.stringify(RetArr[i],"",4)+"\n";
            }

            $("idKeyInfo").value=Str;
            ActualInfo();

        });

    }

    function UpdateFillUser()
    {
        var bOwner=0;
        MaxUserAcc=0;
        var MaxSumTera=-1;

        var Arr=[],ArrOwn=[];
        for(var i=0;i<USER_ACCOUNT.length;i++)
        {
            var Item=USER_ACCOUNT[i];
            if(!Item.Currency && FFromCoin(Item.Value)>MaxSumTera)
            {
                MaxSumTera=FFromCoin(Item.Value);
                MaxUserAcc=Item.Num;
            }
            if(!MaxUserAcc)
                MaxUserAcc=Item.Num;

            if(SMART.Owner===Item.Num)
                bOwner=1;


            var Value={value:Item.Num, text:Item.Num+"."+Item.Name+"  "+SUM_TO_STRING(Item.Value,Item.Currency,1)};
            Arr.push(Value);


            if(SMART.Num===Item.Value.Smart)
                ArrOwn.push(Value);
        }



        FillSelect("idAccD",ArrOwn);
        FillSelect("idAccW",Arr);



        SetVisibleBlock("idTabOwner",bOwner?"1":0);

    }

    function PasueBt(btn)
    {
        btn.disabled = true;
        setTimeout(function()
        {
            btn.disabled = false;
        },1000)
    }

    //--------------
    function FFromCoin(Coin)
    {
        if(!Coin)
            return 0;
        if(Coin.SumCOIN===undefined)
            return 0;
        return FLOAT_FROM_COIN(Coin);
    }

    function TFromCoin(Coin)
    {
        if(!Coin)
            return "0";
        var Sum;
        if(typeof Coin==="number")
            Sum=Coin;
        else
            Sum=FFromCoin(Coin);

        var Str=Sum.toLocaleString(undefined, { useGrouping: true, style: 'decimal', maximumFractionDigits: 6 });
        //var Str=STRING_FROM_COIN(Coin);
        Str=Str.replace(",",".");
        return Str;
    }
    function Round(Sum)
    {
        return Math.floor(Sum*1e6)/1e6;
    }



    function SetText(id,text)
    {
        var item=$(id);
        if(item.innerText!==text)
            item.innerText=text;
    }
    //--------------
    function ActualInfo()
    {
        if(!Storage)
            return;

        SetText("idDepTera",TFromCoin(ActualMap["TERA"]));
        SetText("idDepDAO",TFromCoin(ActualMap["DAO"]));
        SetText("idDepUSD",TFromCoin(ActualMap["USD"]));

        SetText("idPoolTera",TFromCoin(Storage.TeraPool));
        SetText("idPoolUSD",TFromCoin(Storage.USDPool));

        SetText("idAllTera",TFromCoin(Storage.TeraReservePool));
        SetText("idAllUSD",TFromCoin(Storage.USDAll));
        SetText("idAllDAO",TFromCoin(Storage.DAOAll));

        StartInfo();
        DeposiInfo();

        SwapInfo();
        LiqInfo();
    }
    function StartInfo()
    {
        SetText("idIFee",""+Storage.KFee*100+" %");

        var TeraPool=FFromCoin(Storage.TeraPool);
        var USDPool=FFromCoin(Storage.USDPool);
        var USDAll=FFromCoin(Storage.USDAll);
        var TeraReservePool=FFromCoin(Storage.TeraReservePool);
        if(!TeraPool || !TeraReservePool)
            return;

        SetText("idIReserve",Round(USDAll/TeraReservePool));
        SetText("idIRate",Round(USDPool/TeraPool));

        SetText("idITeraSwap",TFromCoin(Storage.TeraSwapFlow));
        SetText("idIUSDSwap",TFromCoin(Storage.USDSwapFlow));



    }

    function DeposiInfo()
    {
        SetText("idAccTera",BASE_ACCOUNT.Num);
        SetText("idAccUSD",Storage.USDAcc);
        SetText("idAccDAO",Storage.DAOAcc);
        SetText("idAccTera2",BASE_ACCOUNT.Num);
        SetText("idAccUSD2",Storage.USDAcc);
        SetText("idAccDAO2",Storage.DAOAcc);
    }


    function SwapInfo()
    {
        if(!Storage)
            return;

        var Sum=parseFloat($("idSumSwap").value);
        SetText("idSumSwap1",TFromCoin(Sum));

        var SumOut,CurArr,Rate;
        var TeraPool=FFromCoin(Storage.TeraPool);
        var USDPool=FFromCoin(Storage.USDPool);

        var Mode=$("idSwap").value;
        if(Mode==="TeraToUSD")
        {
            CurArr=["TERA","USD"];
            var AmountFee=Sum*Storage.KFee;
            var Invariant=TeraPool * USDPool;
            var TeraPoolNew = TeraPool + Sum;
            var USDPoolNew = Invariant/(TeraPoolNew - AmountFee);
            SumOut = USDPool - USDPoolNew;
            Rate=Sum?SumOut/Sum:0;
        }
        else
        {
            CurArr=["USD","TERA"];
            var AmountFee=Sum*Storage.KFee;
            var Invariant=TeraPool * USDPool;
            var USDPoolNew = USDPool + Sum;
            var TeraPoolNew = Invariant / (USDPoolNew - AmountFee);
            SumOut = TeraPool - TeraPoolNew;
            Rate=SumOut?Sum/SumOut:0;
        }

        if(TeraPoolNew<=0)
            SumOut=0;
        if(USDPoolNew<=0)
            SumOut=0;
        if(SumOut<=0)
            SumOut=0;
        SetText("idSumSwap2",TFromCoin(SumOut));
        SetText("idRateSwap",TFromCoin(Rate));


        SetText("idCurSwap1","  "+CurArr[0]);
        SetText("idCurSwap2","  "+CurArr[1]);
    }
    function RunSwap()
    {
        var Mode=$("idSwap").value;
        SendMethod("Swap"+Mode,"idSumSwap");
    }

    function LiqInfo()
    {
        if(!Storage)
            return;

        var Mode=$("idLiq").value;
        SetText("idLiqBt",Mode);


        var Sum=parseFloat($("idSumLiq").value);
        SetText("idSumLiq1",TFromCoin(Sum));

        var SumOut,CurArr,Rate;
        var TeraReservePool=FFromCoin(Storage.TeraReservePool);
        var TeraPool=FFromCoin(Storage.TeraPool);
        var USDPool=FFromCoin(Storage.USDPool);
        var USDAll=FFromCoin(Storage.USDAll);
        var DAOAll=FFromCoin(Storage.DAOAll);


        if(!TeraReservePool || !TeraPool || !DAOAll)
            return;

        var KReserve=USDAll / TeraReservePool;
        var KSwap=USDPool / TeraPool;
        var KDAO=DAOAll/(TeraReservePool+TeraPool);




        var Mode=$("idLiq").value;
        if(Mode==="Add")
        {
            CurArr=["TERA","DAO"];

            var TeraToReserve=Sum/(KReserve/KSwap+1);
            var TeraToPool=Sum-TeraToReserve;
            var USDToPool =TeraToPool*KSwap;

            SumOut=Sum*KDAO;
            Rate=Sum?SumOut/Sum:0;
        }
        else
        {
            CurArr=["DAO","TERA"];

            var TeraWithdrawn = Sum/KDAO;
            var TeraFromReserve = TeraWithdrawn /(KReserve/KSwap+1);
            var TeraFromPool  = TeraWithdrawn  - TeraFromReserve;
            var USDFromPool = TeraFromPool*KSwap;
            if(TeraPool<=TeraFromPool)
                TeraWithdrawn=0;
            if(USDPool<=USDFromPool)
                TeraWithdrawn=0;
            if(TeraReservePool<=TeraFromReserve)
                TeraWithdrawn=0;

            SumOut = TeraWithdrawn;
            Rate=SumOut?Sum/SumOut:0;
        }

        if(SumOut<=0)
            SumOut=0;
        SetText("idSumLiq2",TFromCoin(SumOut));
        SetText("idRateLiq",TFromCoin(Rate));

        SetText("idCurLiq1","  "+CurArr[0]);
        SetText("idCurLiq2","  "+CurArr[1]);
    }
    function RunLiq()
    {
        var Mode=$("idLiq").value;
        SendMethod(Mode+"Liq","idSumLiq");
    }

    function AllSumAcc(idSum,idAcc)
    {
        var Num=+$(idAcc).value;
        var AccObj=USER_ACCOUNT_MAP[Num];
        if(AccObj)
            $(idSum).value=Round(FFromCoin(AccObj.Value));
    }


    function AllSumW(idSum,idAcc)
    {
        var Num=+$(idAcc).value;
        var AccObj=USER_ACCOUNT_MAP[Num];
        if(AccObj)
        {
            var Sum=0;
            if(AccObj.Currency===0)
                Sum=Round(FFromCoin(ActualMap["TERA"]));
            else
            if(AccObj.Currency===Storage.USDNum)
                Sum=Round(FFromCoin(ActualMap["USD"]));
            else
            if(AccObj.Currency===Storage.DAONum)
                Sum=Round(FFromCoin(ActualMap["DAO"]));

            $(idSum).value=Sum;
        }
    }
    function AllSumInvest(idSum)
    {

        var Mode=$("idLiq").value;
        var Sum=0;
        if(Mode==="Add")
            Sum=Round(FFromCoin(ActualMap["TERA"]));
        else
            Sum=Round(FFromCoin(ActualMap["DAO"]));
        $(idSum).value=Sum;
    }
    function AllSumSwap(idSum)
    {
        var Mode=$("idSwap").value;
        var Sum=0;
        if(Mode==="TeraToUSD")
            Sum=Round(FFromCoin(ActualMap["TERA"]));
        else
            Sum=Round(FFromCoin(ActualMap["USD"]));
        $(idSum).value=Sum;
    }



    //-------------
    function ReReadState()
    {
        var Data={};
        var Arr=["CanSwap","KFee","KReserveNew","VoteLib","WalletLib","USDNum","DAONum", "HTMLBlock","HTMLTr"];

        if(Storage)
            for(var i=0;i<Arr.length;i++)
                Data[Arr[i]]=Storage[Arr[i]];

        $("idState").value=JSON.stringify(Data,"",4);
    }


    function RSum(idSum)
    {
        var Sum=Round($(idSum).value);
        return Sum;
    }
    //------------------
    //smart call methods
    //------------------

    function SendMethod(Name,idSum,bNoParams)
    {
        if(!MaxUserAcc)
            return SetError("You don't have any user accounts");


        var Params={Sum:RSum(idSum)};
        if(bNoParams)
            Params={};
        SendCall(0,Name,Params,[],MaxUserAcc);
    }

    function SetConf()
    {
        var Params=JSON.parse($("idState").value);
        SendCall(0,"SetConf",Params,[],SMART.Owner);
    }


    function SendDeposit(idAcc,idSum)
    {
        var Num=+$(idAcc).value;
        if(!Num)
            return SetError("Not select account");

        var Params={Sum:RSum(idSum)};
        SendCall(Num,"Deposit",Params,[],Num);
    }
    function SendWithdraw(idAcc,idSum)
    {
        var Num=+$(idAcc).value;
        if(!Num)
            return SetError("Not selected account");

        var Params={Sum:RSum(idSum),ToNum:Num};
        SendCall(0,"Withdraw",Params,[],MaxUserAcc);
    }

    function SendAccount()
    {
        var Params={Account:+$("idSetAccount").value};
        SendCall(0,"SetWalletAccount",Params,[],0);
    }



</script>


<style>
    /*TAB TAB*/
    :root
    {
        --colorTabB1: rgba(255, 255, 255, 0.6);
        --colorTabB2: #445368;
        --colorTabB3: #53687e;
    }

    table
    {
        border-collapse: collapse;
        max-width: 700px;
        width: 95vw;
    }

    .TabMenu
    {
        z-index:1000;
        top:0;
    }
    .TabMenu th
    {
        color: var(--colorTabB1);
        background-color: var(--colorTabB2);
        margin: 0;
        padding: 1px;
        font-family: Helvetica,Arial,sans-serif;
        font-size: 13px;
        font-weight:100;
        align-content: center;
        min-width: 50px;

        border: 1px solid white;
        vertical-align:middle;
    }

    .bttab
    {
        color: var(--colorTabB1);
        background-color: var(--colorTabB2);
        width: 100%;
        height: 44px;
        line-height:44px;
        margin-left: 0px;
        vertical-align: center;
        text-align: center;
    }
    .btsub
    {
        color: var(--colorTabB2);
        background-color: var(--colorTabB1);
        width: 100%;
        height: 26px;
        line-height:26px;
        margin-left: 0px;
        vertical-align: center;
        text-align: center;
    }


    .btsub:hover,.bttab:hover
    {
        cursor: pointer;
        color: #ecb84e;
    }
    .current
    {
        color: white;
        background-color: var(--colorTabB3);
    }

    .tabitem
    {
        font-size: 14px; width: 300px;text-align: left;
    }


    .accselect
    {
        width: 300px;
        margin: 5px 0 10px 0;
        font-size: 14px;
    }
    .accsum
    {
        width: 100px;
        margin: 5px 0 10px 0;
        font-size: 14px;
    }

    .btrun
    {
        height: 30px;
        padding 5px;
        min-width: 100px;
        border-radius: 5px;
        color: white;
        background-color: var(--colorTabB2);
        border: 0;
        cursor: pointer;
    }
    .btrun:hover
    {
        color: #ecb84e;
    }
    .btrun[disabled]
    {
        color: gray;
        background-color: var(--colorTabB3);
    }

    #idInfo
    {
        border: 1px solid black;
        text-align: left;
        margin-bottom:5px;
        background-color: #B2EFF1;
    }
    .tinfo
    {
        max-width: 300px;
        width: 60vw;
    }

    #idInfo th,.tinfo th
    {
        margin: 0;
        padding: 0;
        height: 24px;
        font-family: Helvetica,Arial,sans-serif;
        font-size: 12px;
        text-align: center;
        border: 1px solid var(--colorTabB2);
        vertical-align:middle;
    }
    .curname
    {
        font-weight: 100;
    }
    .tcurr
    {
        color: #3F44F1;
    }
    .dcurr
    {
        color: #2F883B;
    }
    .tcomment
    {
        font-size: 13px;
        color:var(--colorTabB2);
    }

    #idCanvas
    {
        border: 1px solid var(--colorTabB2);
    }

</style>


<DIV align='center'>

    <INPUT id="idCurTabName" value="TabStart" style="display: none">
    <table class="TabMenu">
        <tr>
            <th><DIV id="MTabStart" onclick="SelectTab(this)" class="bttab">INFO</DIV></th>
            <th><DIV id="MTabSwap" onclick="SelectTab(this)" class="bttab">SWAP</DIV></th>
            <th><DIV id="MTabInvest" onclick="SelectTab(this)" class="bttab">INVEST</DIV></th>
            <!--<th><DIV id="MTabVote" onclick="SelectTab(this)" class="bttab">VOTE</DIV></th>-->
            <th><DIV id="MTabDeposit" onclick="SelectTab(this)" class="bttab">DEPOSIT</DIV></th>
            <th id="idTabOwner"><DIV id="MTabOperate" onclick="SelectTab(this)" class="bttab">OWNER</DIV></th>
        </tr>
    </table>



    <table id="idInfo">
        <tr>
            <th style="width: 20%"></th>
            <th><span class='curname'> TERA</span></th>
            <th><span class='curname'> USD</span></th>
            <th><span class='curname'> DAO</span></th>
        </tr>
        <tr>
            <th style="width: 20%">Deposit</th>
            <th><span id="idDepTera" class="tcurr"></span></th>
            <th><span id="idDepUSD" class="tcurr"></span></th>
            <th><span id="idDepDAO" class="tcurr"></span></th>
        </tr>
        <tr id="idPoolRow">
            <th style="width: 20%">Pool</th>
            <th><span id="idPoolTera"></span></th>
            <th><span id="idPoolUSD"></span></th>
            <th><span></span></th>
        </tr>
        <tr id="idMintedRow">
            <th style="width: 20%">Minted</th>
            <th><span id="idAllTera"></span>*</th>
            <th><span id="idAllUSD"></span></th>
            <th><span id="idAllDAO"></span></th>
        </tr>
    </table>
    <span id="idCommInfo" class="tcomment">*The number of TERA coins that are reserved for a stable coin</span>
    <BR><BR>

    <!--Start-->
    <DIV id="TabStart"  style="display: none;" align="center">
        <DIV class="tabitem">

            <table class="tinfo">
                <tr>
                    <th>Swap Fee</th>
                    <th><span id="idIFee"></span></th>
                </tr>
                <tr>
                    <th>Reserve Rate</th>
                    <th><span id="idIReserve"></span></th>
                </tr>
                <tr>
                    <th>Swap Rate</th>
                    <th><span id="idIRate"></span></th>
                </tr>
                <tr>
                    <th>Volume Tera swap</th>
                    <th><span id="idITeraSwap"></span></th>
                </tr>
                <tr>
                    <th>Volume USD swap</th>
                    <th><span id="idIUSDSwap"></span></th>
                </tr>


            </table>

        </DIV>
    </DIV>


    <!--Deposit-->
    <DIV id="TabDeposit"  style="display: none;" align="center">
        <table class="TabMenu">
            <tr>
                <th><DIV id="MSubDeposit" onclick="SelectTab(this)" class="btsub">Deposit</DIV></th>
                <th><DIV id="MSubWithdraw" onclick="SelectTab(this)" class="btsub">Withdraw</DIV></th>
            </tr>
        </table>
        <BR><BR>

        <DIV class="tabitem" id="SubDeposit" style="display: none;">
            Select the sender's account number:
            <br>
            <select size="1" id="idAccD" class="accselect">
                <option value="0">Loading...</option>
            </select>
            Specify the amount:
            <input id="idSumD" class="accsum"><button onclick="AllSumAcc('idSumD','idAccD')">all</button><BR>
            <button onclick="SendDeposit('idAccD','idSumD');PasueBt(this);" class="btrun">DEPOSIT</button>
            <BR><BR><BR>
            <DIV class="tcomment">
                You can also top up your deposit by sending coins directly from your wallet to these accounts:<BR>
                <b id="idAccTera">11111</b> for TERA<BR>
                <b id="idAccUSD">22222</b> for USD<BR>
                <b id="idAccDAO">33333</b> for DAO<BR>
            </DIV>
        </DIV>

        <DIV class="tabitem" id="SubWithdraw" style="display: none;">
            Select the recipient's account number:
            <br>
            <select size="1" id="idAccW" class="accselect">
                <option value="0">Loading...</option>
            </select>
            Specify the amount:
            <input id="idSumW" class="accsum"><button onclick="AllSumW('idSumW','idAccW')">all</button><BR>
            <button onclick="SendWithdraw('idAccW','idSumW');PasueBt(this);" class="btrun">WITHDRAW</button>
            <BR><BR><BR>
            <DIV class="tcomment">
                You can also make withdrawals by sending a zero amount directly from your wallet to these accounts (specifying the number of withdrawal coins in the description):<BR>
                <b id="idAccTera2">11111</b> for TERA<BR>
                <b id="idAccUSD2">22222</b> for USD<BR>
                <b id="idAccDAO2">33333</b> for DAO<BR>
            </DIV>
        </DIV>

    </DIV>

    <!--bWithdraw-->
    <DIV id="TabWithdraw"  style="display: none;" align="center">
    </DIV>

    <!--Swap-->
    <DIV id="TabSwap"  style="display: none;" align="center">
        <DIV class="tabitem">

            Select swap mode:<BR>
            <select size="1" id="idSwap" class="accselect" onchange="SwapInfo()">
                <option value="TeraToUSD">Tera → USD</option>
                <option value="USDToTera">USD → Tera</option>
            </select>
            <BR>

            Specify the amount:
            <input id="idSumSwap" class="accsum" onchange="SwapInfo()"><button onclick="AllSumSwap('idSumSwap')">all</button><BR>

            <table class="tinfo">
                <tr>
                    <th>Send</th>
                    <th><span id="idSumSwap1" class="dcurr"></span><span id="idCurSwap1" class='curname'></span></th>
                </tr>
                <tr>
                    <th>Receive</th>
                    <th><span id="idSumSwap2" class="dcurr"></span><span id="idCurSwap2" class='curname'></span></th>
                </tr>
                <tr>
                    <th>Price 1 USD</th>
                    <th><span id="idRateSwap" class="dcurr"></span><span id="idCurSwap2" class='curname'></span></th>
                </tr>
            </table>

            <BR>
            <button onclick="RunSwap();PasueBt(this);" class="btrun">SWAP</button>
        </DIV>
    </DIV>

    <!--Invest-->
    <DIV id="TabInvest"  style="display: none;" align="center">
        <DIV class="tabitem">

            Select mode:<BR>
            <select size="1" id="idLiq" class="accselect" onchange="LiqInfo()">
                <option value="Add">Add liquidity (TERA)</option>
                <option value="Remove">Remove liquidity (DAO)</option>
            </select>
            <BR>

            Specify the amount:
            <input id="idSumLiq" class="accsum" onchange="LiqInfo()"><button onclick="AllSumInvest('idSumLiq')">all</button><BR>


            <table class="tinfo">
                <tr>
                    <th>Send</th>
                    <th><span id="idSumLiq1" class="dcurr"></span><span id="idCurLiq1" class='curname'></span></th>
                </tr>
                <tr>
                    <th>Receive</th>
                    <th><span id="idSumLiq2" class="dcurr"></span><span id="idCurLiq2" class='curname'></span></th>
                </tr>
                <tr>
                    <th>Price 1 DAO</th>
                    <th><span id="idRateLiq" class="dcurr"></span><span id="idCurSwap2" class='curname'></span></th>
                </tr>
            </table>

            <BR>
            <button id="idLiqBt" onclick="RunLiq();PasueBt(this);" class="btrun">----</button>

        </DIV>
    </DIV>

    <!--Vote-->
    <DIV id="TabVote"  style="display: none;" align="center">
        <DIV class="tabitem">
            <h3>The possibility of voting will appear in the near future.</h3>
        </DIV>
    </DIV>

    <!--Operate-->
    <DIV id="TabOperate"  style="display: none;" align="center">
        <DIV class="tabitem">

            <BR>Info:<BR>
            <textarea id="idKeyInfo"  rows="12" cols="10" style="width:99%"></textarea>

            <br><br>

            Conf:
            <br>
            <TEXTAREA id="idState" rows="9" cols="40" style="width:99%"></TEXTAREA>
            <br><button onclick="ReReadState()">Read</button>
            <button onclick="SetConf()">Set conf</button>
            <button onclick="SendMethod('Rebalance',0)">Rebalance</button>
            <BR><BR>
            <input id="idSetAccount" type="number" value="">
            <button onclick="SendAccount()">Set Account</button>


        </DIV>
    </DIV>





</DIV>

