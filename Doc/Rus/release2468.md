# Обновление 2468
(доступно с блока 68 500 000)


### Методы в смарт контрактах

#### Storage

* ReadValue(Key,Format) - прочитать значение по строковому ключу Key, если не задан формат то для серилизации используется JSON
* WriteValue(Key,Value,Format)  - записать значение Value по строковому ключу Key, если не задан формат то для серилизации используется JSON, максимальный размер серилизованного значения составляет 65535 байт
* RemoveValue(Key) - удалить значение с заданным ключом

```
Для защиты от DDOS в виде большого размера файлов используется метод стэйкинга. Это означает что должна быть определенная сумма в Терах на базовом аккаунте смарт-контракта. Для хренения 100 байт требуется 1 Тера.
```

#### Криптография

* sha256() - стандарный алгоритм хэша SHA-256 (FIPS 180-3) - Биткоин
* sha3() - стандарный алгоритм хэша SHA3-256 (FIPS 202) - Тера
* keccak256() - алгоритм хэша keccak256 используемый в Эфириуме
* ecrecover(hash, v, r, s) - стандартная функция Эфириума
* CheckSign(HashArr32,SignArr64,PubKeyArr33) - проверка подписи (элиптическая кривая secp256k1 - такая же как в Биткоине)

#### Кросс-шардинг

* SendMessage(ShardPath,Confirms,Method,Params,ParamsArr) - отправка сообщения в другой шард

#### Общее

В смарт-контрактах публичные методы теперь могут иметь второй параметр в который возможна передача байтового массива
длиной до 65535 со стороны клиента. Байтовый массив более компактно записывается в транзакцию (в отличие от JSON),
что уменьшает размер транзакции.
Пример:
```js
function Method1(Params,ParamsArr)
{
}
```



### Новые глобальные методы на стороне клиента
#### Криптография

* sha256() - стандарный алгоритм хэша SHA-256 (FIPS 180-3) - Биткоин
* sha3() - стандарный алгоритм хэша SHA3-256 (FIPS 202) - Тера
* keccak256() - алгоритм хэша keccak256 используемый в Эфириуме
* ecrecover(hash, v, r, s) - стандартная функция Эфириума
* CreateSign(Hash32,PrivKey32) - получение подписи (элиптическая кривая secp256k1). Результат - массив длиной 64 байта.
* CheckSign(HashArr32,SignArr64,PubKeyArr33) - проверка подписи (элиптическая кривая secp256k1 - такая же как в Биткоине)
* ripemd160() - стандарный алгоритм хэша RIPEMD160

* base58,base58check - глобальные объекты с методами decode,encode (кодировки/декодировки base58)

#### Дополнительные библиотеки на стороне клиента
* SignLib - объект для работы с электронной подписью (методы: publicKeyCreate,sign,verify,ecdh)
* bitcore - объект для работы с адресами и транзакциями биткоина, доступен только при явном подключении из https://terafoundation.org/bitcore-lib-min.js
          примеры использования: https://github.com/bitpay/bitcore/blob/master/packages/bitcore-lib/docs/examples.md

#### Общее
Вызов метода смарт-контракта через отправку транзакции теперь имеет вид (добавлен параметр ParamsArr):
```js
SendCall(ToNum,Name,Params,ParamsArr,FromNum);
```



